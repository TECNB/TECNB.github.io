<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>对话式智能助手项目经验 | TEC</title><meta name="author" content="TEC"><meta name="copyright" content="TEC"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="package.json 本地包导入tgz参考：npm如何引入本地自建的包和需要维护的包_npm 引用本地包-CSDN博客、[如何在项目中引用本地的npm包_npm引入本地包-CSDN博客](https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_57956183&#x2F;article&#x2F;details&#x2F;132346194#:~:text&#x3D;package.json中配置引用本地依赖包。 以下是具体操作步骤： 1">
<meta property="og:type" content="article">
<meta property="og:title" content="对话式智能助手项目经验">
<meta property="og:url" content="https://tecnb.github.io/posts/36279e9a.html">
<meta property="og:site_name" content="TEC">
<meta property="og:description" content="package.json 本地包导入tgz参考：npm如何引入本地自建的包和需要维护的包_npm 引用本地包-CSDN博客、[如何在项目中引用本地的npm包_npm引入本地包-CSDN博客](https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_57956183&#x2F;article&#x2F;details&#x2F;132346194#:~:text&#x3D;package.json中配置引用本地依赖包。 以下是具体操作步骤： 1">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/TECNB/picgodemo@main/img/%E5%AF%B9%E8%AF%9D%E5%BC%8F%E6%99%BA%E8%83%BD%E5%8A%A9%E6%89%8B%E9%A1%B9%E7%9B%AE%E7%BB%8F%E9%AA%8C-cover.png">
<meta property="article:published_time" content="2024-11-21T03:12:26.000Z">
<meta property="article:modified_time" content="2024-11-21T03:12:26.000Z">
<meta property="article:author" content="TEC">
<meta property="article:tag" content="TEC">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/TECNB/picgodemo@main/img/%E5%AF%B9%E8%AF%9D%E5%BC%8F%E6%99%BA%E8%83%BD%E5%8A%A9%E6%89%8B%E9%A1%B9%E7%9B%AE%E7%BB%8F%E9%AA%8C-cover.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://tecnb.github.io/posts/36279e9a"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="baidu-site-verification" content="code-EeDq654IWe"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '对话式智能助手项目经验',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-11-21 11:12:26'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/iconfont/iconfont.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/TECNB/picgodemo@main/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">31</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background: default_top_img"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">TEC</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">对话式智能助手项目经验</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-11-21T03:12:26.000Z" title="发表于 2024-11-21 11:12:26">2024-11-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-11-21T03:12:26.000Z" title="更新于 2024-11-21 11:12:26">2024-11-21</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">11.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>58分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="对话式智能助手项目经验"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="package-json-本地包导入tgz"><a href="#package-json-本地包导入tgz" class="headerlink" title="package.json 本地包导入tgz"></a>package.json 本地包导入tgz</h1><p>参考：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/fanweilin0123/article/details/106458861">npm如何引入本地自建的包和需要维护的包_npm 引用本地包-CSDN博客</a>、[如何在项目中引用本地的npm包_npm引入本地包-CSDN博客](<a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/qq_57956183/article/details/132346194#:~:text=package.json%E4%B8%AD%E9%85%8D%E7%BD%AE%E5%BC%95%E7%94%A8%E6%9C%AC%E5%9C%B0%E4%BE%9D%E8%B5%96%E5%8C%85%E3%80%82">https://blog.csdn.net/qq_57956183/article/details/132346194#:~:text=package.json中配置引用本地依赖包。</a> 以下是具体操作步骤： 1. 打开您的 package.json,文件，找到 dependencies 部分。 2. 不要指定包名的版本号，而是指定依赖项所在的本地路径。)、</p>
<p>主要是为了能够使用下载的会员图标库，</p>
<p>package.json:</p>
<p>作为dependencies引入，需要注意的是文件位置，可以通过<code>cd</code>的方式，确认路径是否有问题</p>
<p>还有需要注意的是，打包的tgz中必须包含<code>package.json</code>，否则会报错，这个是卡最多的地方</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ai-report-assistant-frontend&quot;</span>,</span><br><span class="line">  <span class="string">&quot;private&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;0.0.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;module&quot;</span>,</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;vite&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;vue-tsc -b &amp;&amp; vite build&quot;</span>,</span><br><span class="line">    <span class="string">&quot;preview&quot;</span>: <span class="string">&quot;vite preview&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;@fortawesome/fontawesome-free&quot;</span>: <span class="string">&quot;file:./fontawesome-pro-6.6.0-web.tgz&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后需要在main.ts中进行引用</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@fortawesome/fontawesome-free/css/all.min.css&#x27;</span>;</span><br></pre></td></tr></table></figure>





<h1 id="git冲突"><a href="#git冲突" class="headerlink" title="git冲突"></a>git冲突</h1><p>参考：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://zhuanlan.zhihu.com/p/397267546#:~:text=1%E3%80%81git">还在恐惧 Git 冲突? 一篇文章拯救你 - 知乎 (zhihu.com)</a></p>
<h1 id="图标库"><a href="#图标库" class="headerlink" title="图标库"></a>图标库</h1><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://fontawesome.com/search">Chart Bullet Classic Regular Icon | Font Awesom</a></p>
<h1 id="clip-path"><a href="#clip-path" class="headerlink" title="clip-path"></a>clip-path</h1><p>下面的代码将Arrow tail改为四边形中间内凹一个正三角形的样式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;flex justify-center items-center relative&quot;&gt;</span><br><span class="line">                &lt;!-- Arrow tail--&gt;</span><br><span class="line">                &lt;div class=&quot;absolute top-0 -left-3 w-3 h-16 bg-gray-300 opacity-75&quot;</span><br><span class="line">                    style=&quot;clip-path: polygon(0 0, 100% 50%, 0 100%);&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;!-- Main body --&gt;</span><br><span class="line">                &lt;div class=&quot;w-52 h-16 bg-gray-300 opacity-75 cursor-pointer p-2&quot;&gt;</span><br><span class="line">                    &lt;p&gt;数据源&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;!-- Arrow head --&gt;</span><br><span class="line">                &lt;div class=&quot;absolute top-0 -right-5 w-5 h-16 bg-gray-300 opacity-75&quot;</span><br><span class="line">                    style=&quot;clip-path: polygon(0 0%, 100% 50%, 0 100%);&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br></pre></td></tr></table></figure>





<p>实现一个四边形中间凹入一个正三角形的效果，核心在于使用 CSS 中的 <code>clip-path</code> 属性来裁剪出我们需要的形状。我们将利用 <code>polygon</code> 函数定义裁剪路径的每个顶点坐标。下面是实现的具体步骤：</p>
<ol>
<li><strong>了解 <code>clip-path: polygon()</code></strong></li>
</ol>
<p><code>clip-path: polygon()</code> 允许我们通过指定顶点坐标来裁剪元素的形状。坐标使用百分比来表示，起点为左上角 <code>(0%, 0%)</code>，终点为右下角 <code>(100%, 100%)</code>。</p>
<p>基础四边形</p>
<p>首先，绘制一个基本的四边形，使用 <code>clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%)</code>。这将裁剪出一个完整的矩形。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(<span class="number">0</span> <span class="number">0</span>, <span class="number">100%</span> <span class="number">0</span>, <span class="number">100%</span> <span class="number">100%</span>, <span class="number">0</span> <span class="number">100%</span>);</span><br></pre></td></tr></table></figure>

<p>这个路径依次描述四个顶点：</p>
<ul>
<li><code>(0 0)</code>：左上角</li>
<li><code>(100% 0)</code>：右上角</li>
<li><code>(100% 100%)</code>：右下角</li>
<li><code>(0 100%)</code>：左下角</li>
</ul>
<ol start="2">
<li><strong>内凹一个正三角形</strong></li>
</ol>
<p>为了让中间部分凹入一个正三角形，我们需要在矩形的一侧插入一个新的点，使得矩形的一条边向内凹。</p>
<p>假设你希望左边中间凹入，我们可以通过在左侧边线中间插入一个新的点来实现。将其设置为 <code>(25% 50%)</code>，它表示相对于左边线，水平向右 25% 的位置，高度为 50%（即中间位置）。这样可以在四边形的中间位置凹入一个三角形。</p>
<ol start="3">
<li><strong>实现凹入的多边形</strong></li>
</ol>
<p>要在左侧边缘中间凹入一个三角形，我们只需在基本四边形的坐标中插入 <code>(25% 50%)</code> 作为中间点，最终的裁剪路径如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(<span class="number">0</span> <span class="number">0</span>, <span class="number">100%</span> <span class="number">0</span>, <span class="number">100%</span> <span class="number">100%</span>, <span class="number">0</span> <span class="number">100%</span>, <span class="number">25%</span> <span class="number">50%</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>(0 0)</code>：左上角</li>
<li><code>(100% 0)</code>：右上角</li>
<li><code>(100% 100%)</code>：右下角</li>
<li><code>(0 100%)</code>：左下角</li>
<li>**<code>(25% 50%)</code>**：左边线的中间位置，凹入三角形的顶点</li>
</ul>
<ol start="4">
<li><strong>完整代码实现</strong></li>
</ol>
<p>在实际 HTML 中，给定一个 <code>div</code> 元素，我们将使用这个 <code>clip-path</code> 来裁剪其外形：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-center items-center relative&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Arrow tail --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;absolute top-0 -left-3 w-8 h-16 bg-gray-300 opacity-75&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 25% 50%);&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Main body --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;w-52 h-16 bg-gray-300 opacity-75 cursor-pointer p-2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>数据源<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Arrow head --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;absolute top-0 -right-5 w-5 h-16 bg-gray-300 opacity-75&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;clip-path: polygon(0 0%, 100% 50%, 0 100%);&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>总结：</p>
<ul>
<li><strong><code>clip-path: polygon()</code></strong> 允许我们裁剪元素的形状。</li>
<li>通过在四边形的顶点之间插入新的点，我们可以创建一个带有中间凹入正三角形的形状。</li>
<li>具体的 <code>clip-path</code> 路径是根据顶点的顺序定义的，顶点之间连线会形成凹入的效果。</li>
</ul>
<p>这就是如何通过 <code>clip-path</code> 创建一个中间凹入正三角形的四边形的具体实现原理。</p>
<h1 id="低代码实现"><a href="#低代码实现" class="headerlink" title="低代码实现"></a>低代码实现</h1><h2 id="拖拽以及伸缩"><a href="#拖拽以及伸缩" class="headerlink" title="拖拽以及伸缩"></a>拖拽以及伸缩</h2><h3 id="滚动跟手逻辑"><a href="#滚动跟手逻辑" class="headerlink" title="滚动跟手逻辑"></a>滚动跟手逻辑</h3><p>代码中实现了通过<code>@scroll=&quot;onScroll&quot;</code>监听滚动事件，并且在滚动时处理拖拽和调整大小的交互。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">onScroll</span> = (<span class="params">scroll: &#123; scrollLeft: number, scrollTop: number &#125;</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (activeIndex.<span class="property">value</span> !== <span class="literal">null</span> &amp;&amp; isInteracting.<span class="property">value</span>) &#123;</span><br><span class="line">        isScrolling.<span class="property">value</span> = <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// 滚动处理逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="获取-el-scroll-滚动距离"><a href="#获取-el-scroll-滚动距离" class="headerlink" title="获取 el-scroll 滚动距离"></a>获取 <code>el-scroll</code> 滚动距离</h3><p>在 <code>onScroll</code> 方法中，传入了滚动的 <code>scrollLeft</code> 和 <code>scrollTop</code>，可以用来实时获取滚动距离，特别是在拖动或调整大小时使用。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-scrollbar</span> <span class="attr">height</span>=<span class="string">&quot;95%&quot;</span> <span class="attr">wrap-style</span>=<span class="string">&quot;width:100%;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-center&quot;</span> @<span class="attr">scroll</span>=<span class="string">&quot;onScroll&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 滚动区域内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-scrollbar</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="onMouseDown（按下鼠标处理逻辑）"><a href="#onMouseDown（按下鼠标处理逻辑）" class="headerlink" title="onMouseDown（按下鼠标处理逻辑）"></a><code>onMouseDown</code>（按下鼠标处理逻辑）</h3><p><code>onMouseDown</code> 用于初始化拖拽或调整大小操作，保存当前的鼠标坐标以及操作的类型（拖拽或调整大小）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">onMouseDown</span> = (<span class="params">event: MouseEvent, index: number, handleType: <span class="string">&#x27;drag&#x27;</span> | <span class="string">&#x27;resize&#x27;</span></span>) =&gt; &#123;</span><br><span class="line">    isInteracting.<span class="property">value</span> = <span class="literal">true</span>;</span><br><span class="line">    interactionType.<span class="property">value</span> = handleType;</span><br><span class="line">    startX.<span class="property">value</span> = event.<span class="property">clientX</span>;</span><br><span class="line">    startY.<span class="property">value</span> = event.<span class="property">clientY</span>;</span><br><span class="line">    activeIndex.<span class="property">value</span> = index;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (handleType === <span class="string">&#x27;drag&#x27;</span>) &#123;</span><br><span class="line">        initialTop.<span class="property">value</span> = statementItems.<span class="property">value</span>[index].<span class="property">top</span>;</span><br><span class="line">        initialLeft.<span class="property">value</span> = statementItems.<span class="property">value</span>[index].<span class="property">left</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (handleType === <span class="string">&#x27;resize&#x27;</span>) &#123;</span><br><span class="line">        initialWidth.<span class="property">value</span> = statementItems.<span class="property">value</span>[index].<span class="property">width</span>;</span><br><span class="line">        initialHeight.<span class="property">value</span> = statementItems.<span class="property">value</span>[index].<span class="property">height</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 添加鼠标移动和释放的监听事件</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, onMouseMove);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseup&#x27;</span>, onMouseUp);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="onMouseMove（鼠标移动处理逻辑）"><a href="#onMouseMove（鼠标移动处理逻辑）" class="headerlink" title="onMouseMove（鼠标移动处理逻辑）"></a><code>onMouseMove</code>（鼠标移动处理逻辑）</h3><p><code>onMouseMove</code> 负责拖动或调整大小操作，根据鼠标移动的距离更新元素的位置或尺寸。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">onMouseMove</span> = (<span class="params">event: MouseEvent</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (!isInteracting.<span class="property">value</span> || activeIndex.<span class="property">value</span> === <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> deltaX = event.<span class="property">clientX</span> - startX.<span class="property">value</span>;</span><br><span class="line">    <span class="keyword">let</span> deltaY = event.<span class="property">clientY</span> - startY.<span class="property">value</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (interactionType.<span class="property">value</span> === <span class="string">&#x27;drag&#x27;</span>) &#123;</span><br><span class="line">        statementItems.<span class="property">value</span>[activeIndex.<span class="property">value</span>].<span class="property">top</span> = initialTop.<span class="property">value</span> + deltaY;</span><br><span class="line">        statementItems.<span class="property">value</span>[activeIndex.<span class="property">value</span>].<span class="property">left</span> = initialLeft.<span class="property">value</span> + deltaX;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (interactionType.<span class="property">value</span> === <span class="string">&#x27;resize&#x27;</span>) &#123;</span><br><span class="line">        statementItems.<span class="property">value</span>[activeIndex.<span class="property">value</span>].<span class="property">width</span> = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">100</span>, initialWidth.<span class="property">value</span> + deltaX);</span><br><span class="line">        statementItems.<span class="property">value</span>[activeIndex.<span class="property">value</span>].<span class="property">height</span> = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">100</span>, initialHeight.<span class="property">value</span> + deltaY);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="onMouseUp（释放鼠标处理逻辑）"><a href="#onMouseUp（释放鼠标处理逻辑）" class="headerlink" title="onMouseUp（释放鼠标处理逻辑）"></a><code>onMouseUp</code>（释放鼠标处理逻辑）</h3><p><code>onMouseUp</code> 用于结束拖拽或调整大小操作，解除事件监听。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">onMouseUp</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    isInteracting.<span class="property">value</span> = <span class="literal">false</span>;</span><br><span class="line">    interactionType.<span class="property">value</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 恢复文本选择</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">userSelect</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 解除鼠标事件监听</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, onMouseMove);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;mouseup&#x27;</span>, onMouseUp);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="自适应布局"><a href="#自适应布局" class="headerlink" title="自适应布局"></a>自适应布局</h2><h3 id="检查遮挡逻辑"><a href="#检查遮挡逻辑" class="headerlink" title="检查遮挡逻辑"></a>检查遮挡逻辑</h3><p>在拖拽过程中，<code>checkCollision</code> 用于检查当前拖动的元素是否与其他元素发生遮挡。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">checkCollision</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (activeIndex.<span class="property">value</span> === <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> draggedItem = statementItems.<span class="property">value</span>[activeIndex.<span class="property">value</span>];</span><br><span class="line">    statementItems.<span class="property">value</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index !== activeIndex.<span class="property">value</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> isColliding = <span class="title function_">checkOverlap</span>(draggedItem, item);</span><br><span class="line">            <span class="keyword">if</span> (isColliding) &#123;</span><br><span class="line">                <span class="title function_">moveDownItems</span>(index, draggedItem.<span class="property">height</span> + <span class="number">15</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="title function_">restoreAllMovedItems</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="检查两个元素是否遮挡"><a href="#检查两个元素是否遮挡" class="headerlink" title="检查两个元素是否遮挡"></a>检查两个元素是否遮挡</h3><p>使用 <code>checkOverlap</code> 函数判断两个元素是否在视觉上发生遮挡，判断依据为元素的四个边界位置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">checkOverlap</span> = (<span class="params">item1: StatementItem, item2: StatementItem</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> item1Bottom = item1.<span class="property">top</span> + item1.<span class="property">height</span>;</span><br><span class="line">    <span class="keyword">const</span> item1Right = item1.<span class="property">left</span> + item1.<span class="property">width</span>;</span><br><span class="line">    <span class="keyword">const</span> item2Bottom = item2.<span class="property">top</span> + item2.<span class="property">height</span>;</span><br><span class="line">    <span class="keyword">const</span> item2Right = item2.<span class="property">left</span> + item2.<span class="property">width</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        item1.<span class="property">top</span> &lt; item2Bottom &amp;&amp;</span><br><span class="line">        item1Bottom &gt; item2.<span class="property">top</span> &amp;&amp;</span><br><span class="line">        item1.<span class="property">left</span> &lt; item2Right &amp;&amp;</span><br><span class="line">        item1Right &gt; item2.<span class="property">left</span></span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="归位逻辑"><a href="#归位逻辑" class="headerlink" title="归位逻辑"></a>归位逻辑</h3><p>如果两个元素不再遮挡，使用 <code>restoreAllMovedItems</code> 恢复被下移的元素位置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">restoreAllMovedItems</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    movedItems.<span class="title function_">forEach</span>(<span class="function"><span class="params">index</span> =&gt;</span> &#123;</span><br><span class="line">        statementItems.<span class="property">value</span>[index].<span class="property">top</span> = initialPositionsY[index]; <span class="comment">// 恢复到初始位置</span></span><br><span class="line">        movedItems.<span class="title function_">delete</span>(index); <span class="comment">// 清除下移记录</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h2 id="elementplus主题调节"><a href="#elementplus主题调节" class="headerlink" title="elementplus主题调节"></a>elementplus主题调节</h2><p>参考：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://element-plus.org/zh-CN/guide/theming">https://element-plus.org/zh-CN/guide/theming</a></p>
<p>通过开发者选项，找到对应组件的颜色指代代码<code>--el-slider-main-bg-color</code>，然后将其放置到一个统一class类中，当然也可以放在root中，但是会导致加载速度变慢以及多样式覆盖的问题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;el-slider v-model=&quot;sliderValue&quot; :max=&quot;maxScroll&quot; @input=&quot;inputSlider&quot; :show-tooltip=&quot;false&quot;</span><br><span class="line">           class=&quot;el-slider-style&quot;&gt;&lt;/el-slider&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.el-slider-style &#123;</span><br><span class="line">    --el-slider-main-bg-color: #333;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>







<h1 id="position-fixed相对父级元素定位"><a href="#position-fixed相对父级元素定位" class="headerlink" title="position:fixed相对父级元素定位"></a>position:fixed相对父级元素定位</h1><p>参考：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.zhihu.com/question/24822927">https://www.zhihu.com/question/24822927</a></p>
<p>如果父级元素设置了transform属性，position:relative&#x2F;absolute&#x2F;fixed会基于此定位，详细请参考：transformedelement creates a containing block for all its positioned descendants</p>
<h1 id="after、-before"><a href="#after、-before" class="headerlink" title=":after、:before"></a>:after、:before</h1><h1 id="箭头形状组件"><a href="#箭头形状组件" class="headerlink" title="箭头形状组件"></a>箭头形状组件</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;PipelineHeader&quot;&gt;</span><br><span class="line">        &lt;!-- 头部 --&gt;</span><br><span class="line">        &lt;div v-if=&quot;props.info.title !== &#x27;新阶段&#x27;&quot; class=&quot;flex justify-center items-center relative cursor-pointer&quot;&gt;</span><br><span class="line">            &lt;!-- Arrow tail --&gt;</span><br><span class="line">            &lt;div :class=&quot;backgroundClass&quot; class=&quot;absolute top-0 -left-3 w-3 h-16 opacity-80&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- Main body --&gt;</span><br><span class="line">            &lt;div :class=&quot;backgroundClass&quot;</span><br><span class="line">                class=&quot;w-72 h-16 relative flex justify-between items-center  opacity-80 overflow-hidden p-3&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;flex flex-col justify-center items-start&quot; v-if=&quot;props.info.status !== &#x27;inProgress&#x27;&quot;&gt;</span><br><span class="line">                    &lt;p class=&quot;font-bold&quot;&gt;&#123;&#123; props.info.title &#125;&#125;&lt;/p&gt;</span><br><span class="line">                    &lt;p v-if=&quot;props.info.title===&#x27;数据源&#x27;&quot;&gt;&#123;&#123; props.info.num &#125;&#125;个数据源&lt;/p&gt;</span><br><span class="line">                    &lt;p v-else&gt;&#123;&#123; props.info.num &#125;&#125;个任务&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;flex flex-col justify-center items-start&quot; v-else&gt;</span><br><span class="line">                    &lt;p class=&quot;font-bold text-white&quot;&gt;&#123;&#123; props.info.title &#125;&#125;&lt;/p&gt;</span><br><span class="line">                    &lt;p class=&quot;text-white&quot;&gt;&#123;&#123; props.info.completedTasks &#125;&#125;/&#123;&#123; props.info.num &#125;&#125;个任务完成 | &#123;&#123; props.timer &#125;&#125;s&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;!-- 未进行时三个图标 --&gt;</span><br><span class="line">                &lt;div class=&quot;flex justify-center items-center gap-4&quot; v-if=&quot;props.info.status === &#x27;notStarted&#x27;&quot;&gt;</span><br><span class="line">                    &lt;i class=&quot;fa-light fa-pen&quot;&gt;&lt;/i&gt;</span><br><span class="line">                    &lt;i class=&quot;fa-light fa-copy&quot;&gt;&lt;/i&gt;</span><br><span class="line">                    &lt;i class=&quot;fa-light fa-trash&quot;&gt;&lt;/i&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;!-- 完成后打勾图标 --&gt;</span><br><span class="line">                &lt;div class=&quot;absolute -top-3 right-0&quot; v-if=&quot;props.info.status === &#x27;completed&#x27;&quot;&gt;</span><br><span class="line">                    &lt;i class=&quot;fa-solid fa-circle-check text-7xl text-emerald-300&quot;&gt;&lt;/i&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;!-- loading图标 --&gt;</span><br><span class="line">                &lt;div class=&quot;&quot; v-if=&quot;props.info.status === &#x27;inProgress&#x27;&quot;&gt;</span><br><span class="line">                    &lt;i class=&quot;fa-duotone fa-solid fa-loader rotating fa-xl text-white&quot;&gt;&lt;/i&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- Arrow head --&gt;</span><br><span class="line">            &lt;div :class=&quot;backgroundClass&quot; class=&quot;absolute top-0 -right-5 w-5 h-16 opacity-80&quot;</span><br><span class="line">                style=&quot;clip-path: polygon(0 0%, 100% 50%, 0 100%);&quot;&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;!-- 添加符号 --&gt;</span><br><span class="line">            &lt;div v-if=&quot;props.info.title !== &#x27;数据源&#x27;&quot;</span><br><span class="line">                class=&quot;w-4 h-4 absolute -left-7 bottom-6 flex justify-center items-center rounded-xl bg-white shadow-[0_2px_6px_0_rgba(37,43,58,0.4)]&quot;&gt;</span><br><span class="line">                &lt;i class=&quot;fa-regular fa-plus fa-2xs&quot;&gt;&lt;/i&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!-- 头部 --&gt;</span><br><span class="line">        &lt;div v-else class=&quot;flex justify-center items-center relative cursor-pointer&quot;&gt;</span><br><span class="line">            &lt;!-- Arrow tail --&gt;</span><br><span class="line">            &lt;div class=&quot;absolute top-0 -left-3 w-3 h-16 bg-gray-200/60 opacity-80&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- Main body --&gt;</span><br><span class="line">            &lt;div class=&quot;w-72 h-16 flex justify-between items-center bg-gray-200/60 opacity-80 p-3&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;flex flex-col justify-center items-start&quot;&gt;</span><br><span class="line">                    &lt;p class=&quot;font-bold text-black/60&quot;&gt;&#123;&#123; props.info.title &#125;&#125;&lt;/p&gt;</span><br><span class="line">                    &lt;p class=&quot;text-black/60&quot;&gt;&#123;&#123; props.info.num &#125;&#125;个数据源&lt;/p&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- Arrow head --&gt;</span><br><span class="line">            &lt;div class=&quot;absolute top-0 -right-5 w-5 h-16 bg-gray-200/60 opacity-80&quot;</span><br><span class="line">                style=&quot;clip-path: polygon(0 0%, 100% 50%, 0 100%);&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;!-- 添加符号 --&gt;</span><br><span class="line">            &lt;div</span><br><span class="line">                class=&quot;w-4 h-4 absolute -left-7 bottom-6 flex justify-center items-center rounded-xl bg-white shadow-[0_2px_6px_0_rgba(37,43,58,0.4)]&quot;&gt;</span><br><span class="line">                &lt;i class=&quot;fa-regular fa-plus fa-2xs&quot;&gt;&lt;/i&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed &#125; from &quot;vue&quot;</span><br><span class="line">const props = defineProps([&#x27;info&#x27;,&#x27;timer&#x27;])</span><br><span class="line">const emit = defineEmits()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const backgroundClass = computed(() =&gt; &#123;</span><br><span class="line">    if (props.info.status === &#x27;inProgress&#x27;) &#123;</span><br><span class="line">        return &#x27;bg-gray-600&#x27;;</span><br><span class="line">    &#125; else if (props.info.status === &#x27;completed&#x27;) &#123;</span><br><span class="line">        return &#x27;bg-emerald-100&#x27;;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return &#x27;bg-gray-200&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.rotating &#123;</span><br><span class="line">    animation: spin 2s linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes spin &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">        transform: rotate(0deg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    100% &#123;</span><br><span class="line">        transform: rotate(360deg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>





<h1 id="WEB自带TTS实现语音文字互转"><a href="#WEB自带TTS实现语音文字互转" class="headerlink" title="WEB自带TTS实现语音文字互转"></a>WEB自带TTS实现语音文字互转</h1><p>Statement.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;Statement&quot; v-if=&quot;props.ifShow&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;w-[1200px] h-14 shadow-xl fixed left-16 bottom-6 flex items-center bg-gray-50 rounded-3xl p-5&quot; v-if=&quot;ifShowAI&quot;&gt;</span><br><span class="line">            &lt;input v-model=&quot;message&quot; @keyup.enter=&quot;handleEnter&quot; type=&quot;text&quot; placeholder=&quot;输入消息&quot;</span><br><span class="line">                class=&quot;bg-transparent outline-none flex-1 placeholder:text-text-200 placeholder:font-bold text-black ml-2&quot; /&gt;</span><br><span class="line">            &lt;el-icon size=&quot;18&quot; class=&quot;ml-2&quot; @click=&quot;toggleRecognition&quot;&gt;</span><br><span class="line">                &lt;Microphone /&gt;</span><br><span class="line">            &lt;/el-icon&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">// 启动语音识别</span><br><span class="line">const startRecognition = () =&gt; &#123;</span><br><span class="line">    const SpeechRecognition = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;</span><br><span class="line">    if (!SpeechRecognition) &#123;</span><br><span class="line">        alert(&#x27;当前浏览器不支持语音识别功能&#x27;);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    recognition = new SpeechRecognition();</span><br><span class="line">    recognition.lang = &#x27;zh-CN&#x27;;  // 设置语言</span><br><span class="line"></span><br><span class="line">    recognition.onresult = (event: any) =&gt; &#123;</span><br><span class="line">        const transcript = event.results[0][0].transcript;</span><br><span class="line">        message.value = transcript;  // 将识别到的文字保存到 message</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    recognition.onerror = (event: any) =&gt; &#123;</span><br><span class="line">        console.error(&#x27;Speech recognition error: &#x27;, event.error);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    recognition.onend = () =&gt; &#123;</span><br><span class="line">        console.log(&#x27;Speech recognition ended&#x27;);</span><br><span class="line">        isRecognizing.value = false;  // 识别结束后更新状态</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    recognition.start();</span><br><span class="line">    isRecognizing.value = true;  // 设置为识别状态</span><br><span class="line">    console.log(&#x27;Speech recognition started&#x27;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 停止语音识别</span><br><span class="line">const stopRecognition = () =&gt; &#123;</span><br><span class="line">    if (recognition) &#123;</span><br><span class="line">        recognition.stop();</span><br><span class="line">        isRecognizing.value = false;</span><br><span class="line">        console.log(&#x27;Speech recognition manually stopped&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 切换语音识别状态</span><br><span class="line">const toggleRecognition = () =&gt; &#123;</span><br><span class="line">    if (isRecognizing.value) &#123;</span><br><span class="line">        stopRecognition(); // 如果正在识别，则停止</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        startRecognition(); // 如果未在识别，则开始识别</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h1 id="echart封装"><a href="#echart封装" class="headerlink" title="echart封装"></a>echart封装</h1><h2 id="引用方法"><a href="#引用方法" class="headerlink" title="引用方法"></a>引用方法</h2><p>statementltems.ts</p>
<p>下面是假数据部分，需要加新的图标时增加statementItems，type、chart、data、chartOption控制对应的图表参数</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StatementItem</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../interfaces/StatementItem&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> airLineOptions <span class="keyword">from</span> <span class="string">&#x27;../utils/airLineOptions&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> waterBarOption <span class="keyword">from</span> <span class="string">&#x27;../utils/waterBarOption&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> forestPieOption <span class="keyword">from</span> <span class="string">&#x27;../utils/forestPieOption&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> airHorizontalBarOption <span class="keyword">from</span> <span class="string">&#x27;../utils/airHorizontalBarOption&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> funnelOptions <span class="keyword">from</span> <span class="string">&#x27;../utils/funnelOptions&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> boardOptions <span class="keyword">from</span> <span class="string">&#x27;../utils/boardOptions&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> radarOptions <span class="keyword">from</span> <span class="string">&#x27;../utils/radarOptions&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> boxplotOptions <span class="keyword">from</span> <span class="string">&#x27;../utils/boxplotOptions&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> scatterOption <span class="keyword">from</span> <span class="string">&#x27;../utils/scatterOption&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; airLineData &#125; <span class="keyword">from</span> <span class="string">&#x27;../constant/airLineData&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; forestPieData &#125; <span class="keyword">from</span> <span class="string">&#x27;../constant/forestPieData&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; waterBarData &#125; <span class="keyword">from</span> <span class="string">&#x27;../constant/waterBarData&#x27;</span> ;</span><br><span class="line"><span class="keyword">import</span> &#123; horizontalBarData &#125; <span class="keyword">from</span> <span class="string">&#x27;../constant/horizontalBarData&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; funnelData &#125; <span class="keyword">from</span> <span class="string">&#x27;../constant/funnelData&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; boardData &#125; <span class="keyword">from</span> <span class="string">&#x27;../constant/boardData&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; radarData &#125; <span class="keyword">from</span> <span class="string">&#x27;../constant/radarData&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; boxplotData &#125; <span class="keyword">from</span> <span class="string">&#x27;../constant/boxplotData&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; scatterData &#125; <span class="keyword">from</span> <span class="string">&#x27;../constant/scatterData&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> statementItems = ref&lt;<span class="title class_">StatementItem</span>[]&gt;([</span><br><span class="line">    &#123; <span class="attr">top</span>: <span class="number">0</span>, <span class="attr">left</span>: <span class="number">50</span>, <span class="attr">height</span>: <span class="number">200</span>, <span class="attr">width</span>: <span class="number">600</span>, <span class="attr">label</span>: <span class="string">&#x27;空气质量优良天数&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;numbers&#x27;</span>, <span class="attr">numbers</span>: [<span class="string">&quot;2&quot;</span>, <span class="string">&quot;8&quot;</span>, <span class="string">&quot;0&quot;</span>,<span class="string">&quot;天&quot;</span>] &#125;,</span><br><span class="line">    &#123; <span class="attr">top</span>: <span class="number">0</span>, <span class="attr">left</span>: <span class="number">680</span>, <span class="attr">height</span>: <span class="number">200</span>, <span class="attr">width</span>: <span class="number">600</span>, <span class="attr">label</span>: <span class="string">&#x27;本年度二氧化碳总排放量&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;numbers&#x27;</span>, <span class="attr">numbers</span>: [<span class="string">&quot;1&quot;</span>, <span class="string">&quot;1&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;亿吨&quot;</span>,] &#125;,</span><br><span class="line">    &#123; <span class="attr">top</span>: <span class="number">220</span>, <span class="attr">left</span>: <span class="number">50</span>, <span class="attr">height</span>: <span class="number">290</span>, <span class="attr">width</span>: <span class="number">1190</span>, <span class="attr">label</span>: <span class="string">&#x27;年度空气质量统计&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;chart&#x27;</span>, <span class="attr">chart</span>: <span class="string">&#x27;line&#x27;</span>, <span class="attr">data</span>: airLineData, <span class="attr">chartOption</span>: airLineOptions &#125;,</span><br><span class="line">    &#123; <span class="attr">top</span>: <span class="number">550</span>, <span class="attr">left</span>: <span class="number">50</span>, <span class="attr">height</span>: <span class="number">290</span>, <span class="attr">width</span>: <span class="number">350</span>, <span class="attr">label</span>: <span class="string">&#x27;年度碳排放来源分析&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;chart&#x27;</span>, <span class="attr">chart</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="attr">data</span>: waterBarData, <span class="attr">chartOption</span>: waterBarOption &#125;,</span><br><span class="line">    &#123; <span class="attr">top</span>: <span class="number">550</span>, <span class="attr">left</span>: <span class="number">470</span>, <span class="attr">height</span>: <span class="number">290</span>, <span class="attr">width</span>: <span class="number">350</span>, <span class="attr">label</span>: <span class="string">&#x27;年度森林覆盖率&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;chart&#x27;</span>, <span class="attr">chart</span>: <span class="string">&#x27;pie&#x27;</span>, <span class="attr">data</span>: forestPieData, <span class="attr">chartOption</span>: forestPieOption &#125;,</span><br><span class="line">    &#123; <span class="attr">top</span>: <span class="number">550</span>, <span class="attr">left</span>: <span class="number">890</span>, <span class="attr">height</span>: <span class="number">290</span>, <span class="attr">width</span>: <span class="number">350</span>, <span class="attr">label</span>: <span class="string">&#x27;空气质量对比&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;chart&#x27;</span>, <span class="attr">chart</span>: <span class="string">&#x27;horizontalBar&#x27;</span>, <span class="attr">data</span>: horizontalBarData, <span class="attr">chartOption</span>: airHorizontalBarOption &#125;</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> statementItems2 = ref&lt;<span class="title class_">StatementItem</span>[]&gt;([</span><br><span class="line">    &#123; <span class="attr">top</span>: <span class="number">0</span>, <span class="attr">left</span>: <span class="number">20</span>, <span class="attr">height</span>: <span class="number">200</span>, <span class="attr">width</span>: <span class="number">350</span>, <span class="attr">label</span>: <span class="string">&#x27;本年度种草改良总量&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;numbers&#x27;</span>, <span class="attr">numbers</span>: [<span class="string">&quot;4&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;9&quot;</span>, <span class="string">&quot;万公顷&quot;</span>] &#125;,</span><br><span class="line">    &#123; <span class="attr">top</span>: <span class="number">0</span>, <span class="attr">left</span>: <span class="number">380</span>, <span class="attr">height</span>: <span class="number">290</span>, <span class="attr">width</span>: <span class="number">580</span>, <span class="attr">label</span>: <span class="string">&#x27;年度绿化面积&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;numbers&#x27;</span>, <span class="attr">numbers</span>: [<span class="string">&quot;8&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;万公顷&quot;</span>] &#125;,</span><br><span class="line">    &#123; <span class="attr">top</span>: <span class="number">0</span>, <span class="attr">left</span>: <span class="number">970</span>, <span class="attr">height</span>: <span class="number">200</span>, <span class="attr">width</span>: <span class="number">350</span>, <span class="attr">label</span>: <span class="string">&#x27;本年度治理沙化面积&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;numbers&#x27;</span>, <span class="attr">numbers</span>: [<span class="string">&quot;1&quot;</span>, <span class="string">&quot;9&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;万公顷&quot;</span>] &#125;,</span><br><span class="line"></span><br><span class="line">    &#123; <span class="attr">top</span>: <span class="number">300</span>, <span class="attr">left</span>: <span class="number">380</span>, <span class="attr">height</span>: <span class="number">500</span>, <span class="attr">width</span>: <span class="number">538</span>, <span class="attr">label</span>: <span class="string">&#x27;绿化面积对比&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;chart&#x27;</span>, <span class="attr">chart</span>: <span class="string">&#x27;radar&#x27;</span>, <span class="attr">data</span>: radarData, <span class="attr">chartOption</span>: radarOptions &#125;,</span><br><span class="line">    &#123; <span class="attr">top</span>: <span class="number">210</span>, <span class="attr">left</span>: <span class="number">20</span>, <span class="attr">height</span>: <span class="number">290</span>, <span class="attr">width</span>: <span class="number">308</span>, <span class="attr">label</span>: <span class="string">&#x27;年度绿化来源分析&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;chart&#x27;</span>, <span class="attr">chart</span>: <span class="string">&#x27;funnel&#x27;</span>, <span class="attr">data</span>: funnelData, <span class="attr">chartOption</span>: funnelOptions &#125;,</span><br><span class="line">    &#123; <span class="attr">top</span>: <span class="number">510</span>, <span class="attr">left</span>: <span class="number">20</span>, <span class="attr">height</span>: <span class="number">290</span>, <span class="attr">width</span>: <span class="number">308</span>, <span class="attr">label</span>: <span class="string">&#x27;年度碳排放来源分析&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;chart&#x27;</span>, <span class="attr">chart</span>: <span class="string">&#x27;boxplot&#x27;</span>, <span class="attr">data</span>: boxplotData, <span class="attr">chartOption</span>: boxplotOptions &#125;,</span><br><span class="line">    &#123; <span class="attr">top</span>: <span class="number">210</span>, <span class="attr">left</span>: <span class="number">970</span>, <span class="attr">height</span>: <span class="number">290</span>, <span class="attr">width</span>: <span class="number">308</span>, <span class="attr">label</span>: <span class="string">&#x27;年度绿化统计&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;chart&#x27;</span>, <span class="attr">chart</span>: <span class="string">&#x27;board&#x27;</span>, <span class="attr">data</span>: boardData, <span class="attr">chartOption</span>: boardOptions &#125;,</span><br><span class="line"></span><br><span class="line">    &#123; <span class="attr">top</span>: <span class="number">510</span>, <span class="attr">left</span>: <span class="number">970</span>, <span class="attr">height</span>: <span class="number">290</span>, <span class="attr">width</span>: <span class="number">308</span>, <span class="attr">label</span>: <span class="string">&#x27;碳排放量对比&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;chart&#x27;</span>, <span class="attr">chart</span>: <span class="string">&#x27;scatter&#x27;</span>, <span class="attr">data</span>: scatterData, <span class="attr">chartOption</span>: scatterOption &#125;,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<p>Statement.vue</p>
<p>下面是使用假数据循环渲染部分，用到新的图表类型时，需要往<code>getChartComponent</code>中添加对应的图表名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;Statement&quot; v-if=&quot;props.ifShow&quot;&gt;</span><br><span class="line">        &lt;el-scrollbar height=&quot;95%&quot; wrap-style=&quot;width:100%;&quot; class=&quot;flex justify-center&quot; @scroll=&quot;onScroll&quot; v-else&gt;</span><br><span class="line">            &lt;div class=&quot;w-full flex flex-col justify-center items-center self-center relative overflow-visible&quot;&gt;</span><br><span class="line">                &lt;!-- 动态渲染可拖动的元素 --&gt;</span><br><span class="line">                &lt;div v-for=&quot;(item, index) in statementItems&quot; :key=&quot;index&quot; :data-id=&quot;index&quot;</span><br><span class="line">                    :style=&quot;&#123; top: `$&#123;item.top&#125;px`, left: `$&#123;item.left&#125;px`, width: item.type === &#x27;chart&#x27; ? &#x27;auto&#x27; : `$&#123;item.width&#125;px`, height: `$&#123;item.height&#125;px`, position: &#x27;absolute&#x27; &#125;&quot;</span><br><span class="line">                    class=&quot;shadow-[0_8px_24px_rgba(0,0,0,0.04)] border rounded-lg my-5 p-5 overflow-visible bg-white&quot;</span><br><span class="line">                    @mouseenter=&quot;showDesign(index)&quot; @mouseleave=&quot;hiddenDesign&quot;&gt;</span><br><span class="line">                    &lt;!-- 悬浮按钮 --&gt;</span><br><span class="line">                    &lt;div v-if=&quot;hoveredItem === index&quot; @mouseenter=&quot;showDesign(index)&quot; @mouseleave=&quot;hiddenDesign&quot;</span><br><span class="line">                        @mousedown=&quot;onMouseDown($event, index, &#x27;drag&#x27;)&quot;</span><br><span class="line">                        class=&quot;absolute w-5 h-8 top-1 -left-6 bg-gray-100 flex justify-center items-center gap-1 rounded-md cursor-move&quot;&gt;</span><br><span class="line">                        &lt;i class=&quot;fa-regular fa-ellipsis-vertical&quot; style=&quot;color: #4b5563;&quot;&gt;&lt;/i&gt;</span><br><span class="line">                        &lt;i class=&quot;fa-regular fa-ellipsis-vertical&quot; style=&quot;color: #4b5563;&quot;&gt;&lt;/i&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    &lt;!-- 控制大小按钮 --&gt;</span><br><span class="line">                    &lt;div v-if=&quot;hoveredItem === index&quot;</span><br><span class="line">                        class=&quot;absolute w-5 h-8 -bottom-3 -right-2 flex cursor-nwse-resize&quot;</span><br><span class="line">                        @mousedown=&quot;onMouseDown($event, index, &#x27;resize&#x27;)&quot;&gt;</span><br><span class="line">                        &lt;i class=&quot;fa-solid fa-corner fa-rotate-90&quot; style=&quot;color: #4b5563;&quot;&gt;&lt;/i&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;!-- 根据不同的类型渲染不同内容 --&gt;</span><br><span class="line">                    &lt;input class=&quot;text-sm font-bold input-reset&quot; type=&quot;text&quot; v-model=&quot;item.label&quot; /&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;!-- 数字数据类型 --&gt;</span><br><span class="line">                    &lt;div v-if=&quot;item.type === &#x27;numbers&#x27;&quot; class=&quot;h-full flex justify-center items-center gap-2&quot;&gt;</span><br><span class="line">                        &lt;p v-for=&quot;n in item.numbers&quot; :key=&quot;n&quot;</span><br><span class="line">                            class=&quot;px-2 py-5 text-4xl font-bold bg-gray-100 rounded-lg&quot;&gt;&#123;&#123; n</span><br><span class="line">                            &#125;&#125;&lt;/p&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;!-- 图表类型 --&gt;</span><br><span class="line">                    &lt;div v-else-if=&quot;item.type === &#x27;chart&#x27;&quot; class=&quot;w-full h-full&quot;&gt;</span><br><span class="line">                        &lt;component :is=&quot;getChartComponent(item.chart)&quot; :width=&quot;item.width&quot; :height=&quot;item.height - 50&quot;</span><br><span class="line">                            :data=&quot;item.data&quot; :chartOption=&quot;item.chartOption&quot; /&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;!-- 移动位置提示 --&gt;</span><br><span class="line">                    &lt;div v-if=&quot;isInteracting &amp;&amp; activeIndex === index&quot;</span><br><span class="line">                        class=&quot;absolute top-0 left-0 w-full h-full bg-gray-200 rounded-lg opacity-50 pointer-events-none&quot;&gt;</span><br><span class="line">                        &lt;!-- 显示提示的矩形背景，拖拽时会显示 --&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/el-scrollbar&gt;</span><br><span class="line">        &lt;div class=&quot;w-[1200px] h-14 shadow-xl fixed left-16 bottom-6 flex items-center bg-gray-50 rounded-3xl p-5&quot; v-if=&quot;ifShowAI&quot;&gt;</span><br><span class="line"></span><br><span class="line">            &lt;input v-model=&quot;message&quot; @keyup.enter=&quot;handleEnter&quot; type=&quot;text&quot; placeholder=&quot;输入消息&quot;</span><br><span class="line">                class=&quot;bg-transparent outline-none flex-1 placeholder:text-text-200 placeholder:font-bold text-black ml-2&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-icon size=&quot;18&quot; class=&quot;ml-2&quot; @click=&quot;toggleRecognition&quot;&gt;</span><br><span class="line">                &lt;Microphone /&gt;</span><br><span class="line">            &lt;/el-icon&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">const getChartComponent = (chartType: string) =&gt; &#123;</span><br><span class="line">    const chartComponents: &#123; [key: string]: any &#125; = &#123;</span><br><span class="line">        line: LineContainer,</span><br><span class="line">        bar: BarContainer,</span><br><span class="line">        pie: PieContainer,</span><br><span class="line">        horizontalBar: HorizontalBarContainer,</span><br><span class="line">        funnel: FunnelContainer,</span><br><span class="line">        board: BoardContainer,</span><br><span class="line">        radar: RadarContainer,</span><br><span class="line">        boxplot: BoxplotContainer,</span><br><span class="line">        scatter: ScatterContainer</span><br><span class="line">    &#125;;</span><br><span class="line">    return chartComponents[chartType] || null;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>StatementItem.ts</p>
<p>下面是类型接口，需要加图表时，在chart中加入对应的类型</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">StatementItem</span> &#123;</span><br><span class="line">    <span class="attr">top</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">left</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">height</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">width</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">label</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;numbers&#x27;</span> | <span class="string">&#x27;chart&#x27;</span>; <span class="comment">// 定义类型为数字或图表</span></span><br><span class="line">    numbers?: <span class="built_in">string</span>[]; <span class="comment">// 如果是数字类型，包含数字数组</span></span><br><span class="line">    chart?: <span class="string">&#x27;line&#x27;</span> | <span class="string">&#x27;bar&#x27;</span> | <span class="string">&#x27;pie&#x27;</span> | <span class="string">&#x27;horizontalBar&#x27;</span> | <span class="string">&#x27;funnel&#x27;</span> | <span class="string">&#x27;board&#x27;</span> | <span class="string">&#x27;radar&#x27;</span> | <span class="string">&#x27;boxplot&#x27;</span> | <span class="string">&#x27;scatter&#x27;</span>; <span class="comment">// 图表类型</span></span><br><span class="line">    data?: <span class="built_in">any</span>; <span class="comment">// 图表的数据</span></span><br><span class="line">    chartOption?: <span class="built_in">any</span>; <span class="comment">// 图表的配置选项</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="柱状图"><a href="#柱状图" class="headerlink" title="柱状图"></a>柱状图</h2><p>BarContainer.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;barContainer w-full&quot;&gt;</span><br><span class="line">        &lt;div ref=&quot;barContainer&quot; :style=&quot;&#123; width: typeof width === &#x27;string&#x27; ? width : `$&#123;width&#125;px`, height: `$&#123;height&#125;px` &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; onMounted, nextTick, ref &#125; from &quot;vue&quot;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;;</span><br><span class="line">import &#123; ECBasicOption &#125; from &#x27;echarts/types/dist/shared&#x27;;</span><br><span class="line"></span><br><span class="line">// 接收 airLineOptions 函数和数据作为 prop</span><br><span class="line">const props = defineProps&lt;&#123;</span><br><span class="line">    width: number|string;</span><br><span class="line">    height: number;</span><br><span class="line">    data: &#123;</span><br><span class="line">        xAxisData: string[];</span><br><span class="line">        seriesData: number[];</span><br><span class="line">    &#125;;</span><br><span class="line">    chartOption: (xAxisData: string[], seriesData: number[]) =&gt; ECBasicOption</span><br><span class="line">&#125;&gt;();</span><br><span class="line"></span><br><span class="line">const barContainer = ref&lt;HTMLElement | null&gt;(null);</span><br><span class="line">let bar: echarts.ECharts | null = null;</span><br><span class="line"></span><br><span class="line">onMounted(async () =&gt; &#123;</span><br><span class="line">    await nextTick();</span><br><span class="line">    initWaterBarChart();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 初始化图表方法</span><br><span class="line">const initWaterBarChart = () =&gt; &#123;</span><br><span class="line">    if (barContainer.value) &#123;</span><br><span class="line">        bar = echarts.init(barContainer.value);</span><br><span class="line">        renderWaterBar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 渲染图表</span><br><span class="line">const renderWaterBar = () =&gt; &#123;</span><br><span class="line">    // 使用从父组件传入的 airLineOptions 函数生成图表选项</span><br><span class="line">    const options = props.chartOption(props.data.xAxisData, props.data.seriesData);</span><br><span class="line"></span><br><span class="line">    // 使用 ECharts 实例的 setOption 方法渲染图表</span><br><span class="line">    bar?.setOption(options);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>waterBarOption.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ECBasicOption</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/types/dist/shared&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> waterBarOption = (<span class="attr">xAxisData</span>: <span class="built_in">string</span>[], <span class="attr">seriesData</span>: <span class="built_in">number</span>[]): <span class="function"><span class="params">ECBasicOption</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">xAxis</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: xAxisData,</span><br><span class="line">            <span class="attr">axisLabel</span>: &#123;</span><br><span class="line">                <span class="attr">rotate</span>: <span class="number">0</span>,  <span class="comment">// 旋转横轴标签，适应来源类别显示</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">yAxis</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">            <span class="attr">position</span>: <span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;碳排放量 (吨)&#x27;</span>,  <span class="comment">// Y轴标签修改为碳排放量</span></span><br><span class="line">            <span class="attr">nameTextStyle</span>: &#123;</span><br><span class="line">                <span class="attr">padding</span>: [<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>],  <span class="comment">// 调整标签位置</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">grid</span>: &#123;</span><br><span class="line">            <span class="attr">left</span>: <span class="string">&#x27;5%&#x27;</span>,</span><br><span class="line">            <span class="attr">right</span>: <span class="string">&#x27;5%&#x27;</span>,</span><br><span class="line">            <span class="attr">bottom</span>: <span class="string">&#x27;10%&#x27;</span>,</span><br><span class="line">            <span class="attr">containLabel</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">series</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;碳排放量&#x27;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">                <span class="attr">data</span>: seriesData,</span><br><span class="line">                <span class="attr">color</span>: [<span class="string">&#x27;#5DB1FF&#x27;</span>],  <span class="comment">// 颜色改为适合碳排放的颜色</span></span><br><span class="line">                <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">normal</span>: &#123;</span><br><span class="line">                        <span class="attr">barBorderRadius</span>: [<span class="number">8</span>, <span class="number">8</span>, <span class="number">0</span>, <span class="number">0</span>],  <span class="comment">// 保持柱状图的圆角效果</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> waterBarOption;</span><br></pre></td></tr></table></figure>

<p>waterBarData.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> waterBarData = &#123;</span><br><span class="line">    <span class="attr">xAxisData</span>: [<span class="string">&#x27;能源&#x27;</span>, <span class="string">&#x27;工业&#x27;</span>, <span class="string">&#x27;交通&#x27;</span>, <span class="string">&#x27;居民&#x27;</span>, <span class="string">&#x27;农业&#x27;</span>, <span class="string">&#x27;其他&#x27;</span>],</span><br><span class="line">    <span class="attr">seriesData</span>: [<span class="number">5300</span>, <span class="number">4500</span>, <span class="number">3200</span>, <span class="number">2100</span>, <span class="number">1800</span>, <span class="number">900</span>],  <span class="comment">// 从大到小排序后的碳排放量数据</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h2 id="仪表盘"><a href="#仪表盘" class="headerlink" title="仪表盘"></a>仪表盘</h2><p>BoardContainer.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;BoardContainer w-full&quot;&gt;</span><br><span class="line">        &lt;div ref=&quot;boardContainer&quot;</span><br><span class="line">            :style=&quot;&#123; width: typeof width === &#x27;string&#x27; ? width : `$&#123;width&#125;px`, height: `$&#123;height&#125;px` &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; onMounted, nextTick, ref &#125; from &quot;vue&quot;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;;</span><br><span class="line">import &#123; ECBasicOption &#125; from &#x27;echarts/types/dist/shared&#x27;;</span><br><span class="line"></span><br><span class="line">// 接收 boardOptions 函数和数据作为 prop</span><br><span class="line">const props = defineProps&lt;&#123;</span><br><span class="line">    width: number | string;</span><br><span class="line">    height: number;</span><br><span class="line">    data: &#123;</span><br><span class="line">        currentValue: number;</span><br><span class="line">    &#125;;</span><br><span class="line">    chartOption: (currentValue: number) =&gt; ECBasicOption</span><br><span class="line">&#125;&gt;();</span><br><span class="line"></span><br><span class="line">const boardContainer = ref&lt;HTMLElement | null&gt;(null);</span><br><span class="line">let board: echarts.ECharts | null = null;</span><br><span class="line"></span><br><span class="line">onMounted(async () =&gt; &#123;</span><br><span class="line">    await nextTick();</span><br><span class="line">    initBoardChart();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 初始化图表方法</span><br><span class="line">const initBoardChart = () =&gt; &#123;</span><br><span class="line">    if (boardContainer.value) &#123;</span><br><span class="line">        board = echarts.init(boardContainer.value);</span><br><span class="line">        renderBoardChart();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 渲染图表</span><br><span class="line">const renderBoardChart = () =&gt; &#123;</span><br><span class="line">    // 使用从父组件传入的 boardOptions 函数生成图表选项</span><br><span class="line">    const options = props.chartOption(props.data.currentValue);</span><br><span class="line"></span><br><span class="line">    // 使用 ECharts 实例的 setOption 方法渲染图表</span><br><span class="line">    board?.setOption(options);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.BoardContainer &#123;</span><br><span class="line">    // 可以根据需要添加或调整样式</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>radarOptions.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ECBasicOption</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/types/dist/shared&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> radarOptions = (<span class="attr">indicatorData</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span>; <span class="attr">max</span>: <span class="built_in">number</span> &#125;[], <span class="attr">seriesData</span>: <span class="built_in">number</span>[]): <span class="function"><span class="params">ECBasicOption</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">tooltip</span>: &#123;</span><br><span class="line">            <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">radar</span>: &#123;</span><br><span class="line">            <span class="comment">// 指标配置</span></span><br><span class="line">            <span class="attr">indicator</span>: indicatorData,</span><br><span class="line">            <span class="attr">shape</span>: <span class="string">&#x27;polygon&#x27;</span>,  <span class="comment">// 雷达图形状</span></span><br><span class="line">            <span class="attr">splitNumber</span>: <span class="number">5</span>,  <span class="comment">// 网格分成的层数</span></span><br><span class="line">            <span class="attr">axisName</span>: &#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;#333&#x27;</span>,  <span class="comment">// 轴线名称颜色</span></span><br><span class="line">                <span class="attr">fontSize</span>: <span class="number">12</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">splitLine</span>: &#123;</span><br><span class="line">                <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">color</span>: <span class="string">&#x27;#ddd&#x27;</span>,  <span class="comment">// 网格线颜色</span></span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">splitArea</span>: &#123;</span><br><span class="line">                <span class="attr">show</span>: <span class="literal">false</span>,  <span class="comment">// 隐藏雷达图的背景填充</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">series</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;绿化率&#x27;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;radar&#x27;</span>,</span><br><span class="line">                <span class="attr">data</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">value</span>: seriesData,</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;年度绿化率&#x27;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">areaStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">color</span>: <span class="string">&#x27;rgba(93, 177, 255, 0.5)&#x27;</span>,  <span class="comment">// 填充颜色，透明度调整适合展示绿化率</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">color</span>: <span class="string">&#x27;#5DB1FF&#x27;</span>,  <span class="comment">// 线条颜色</span></span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> radarOptions;</span><br></pre></td></tr></table></figure>

<p>radarData.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> radarData = &#123;</span><br><span class="line">    <span class="attr">indicatorData</span>: [</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;公园绿地&#x27;</span>, <span class="attr">max</span>: <span class="number">100</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;道路绿化&#x27;</span>, <span class="attr">max</span>: <span class="number">100</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;社区绿化&#x27;</span>, <span class="attr">max</span>: <span class="number">100</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;城市绿化&#x27;</span>, <span class="attr">max</span>: <span class="number">100</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;水域绿化&#x27;</span>, <span class="attr">max</span>: <span class="number">100</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">seriesData</span>: [<span class="number">80</span>, <span class="number">70</span>, <span class="number">85</span>, <span class="number">90</span>, <span class="number">75</span>],  <span class="comment">// 各个绿化维度的实际值</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="盒须图"><a href="#盒须图" class="headerlink" title="盒须图"></a>盒须图</h2><p>BoxplotContainer.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;boxplotContainer w-full&quot;&gt;</span><br><span class="line">        &lt;div ref=&quot;boxplotContainer&quot;</span><br><span class="line">            :style=&quot;&#123; width: typeof width === &#x27;string&#x27; ? width : `$&#123;width&#125;px`, height: `$&#123;height&#125;px` &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; onMounted, nextTick, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;;</span><br><span class="line">import &#123; ECBasicOption &#125; from &#x27;echarts/types/dist/shared&#x27;;</span><br><span class="line"></span><br><span class="line">// 接收 boxplotOptions 函数和数据作为 prop</span><br><span class="line">const props = defineProps&lt;&#123;</span><br><span class="line">    width: number | string;</span><br><span class="line">    height: number;</span><br><span class="line">    data: &#123;</span><br><span class="line">        xAxisData: string[];</span><br><span class="line">        seriesData: number[][];</span><br><span class="line">    &#125;;</span><br><span class="line">    chartOption: (xAxisData: string[], seriesData: number[][]) =&gt; ECBasicOption</span><br><span class="line">&#125;&gt;();</span><br><span class="line"></span><br><span class="line">const boxplotContainer = ref&lt;HTMLElement | null&gt;(null);</span><br><span class="line">let boxplot: echarts.ECharts | null = null;</span><br><span class="line"></span><br><span class="line">onMounted(async () =&gt; &#123;</span><br><span class="line">    await nextTick();</span><br><span class="line">    initBoxplotChart();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 初始化图表方法</span><br><span class="line">const initBoxplotChart = () =&gt; &#123;</span><br><span class="line">    if (boxplotContainer.value) &#123;</span><br><span class="line">        boxplot = echarts.init(boxplotContainer.value);</span><br><span class="line">        renderBoxplot();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 渲染图表</span><br><span class="line">const renderBoxplot = () =&gt; &#123;</span><br><span class="line">    // 使用从父组件传入的 boxplotOptions 函数生成图表选项</span><br><span class="line">    const options = props.chartOption(props.data.xAxisData, props.data.seriesData);</span><br><span class="line"></span><br><span class="line">    // 使用 ECharts 实例的 setOption 方法渲染图表</span><br><span class="line">    boxplot?.setOption(options);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>boxplotOptions.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ECBasicOption</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/types/dist/shared&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成 Boxplot 图表选项的函数</span></span><br><span class="line"><span class="keyword">const</span> boxplotOptions = (<span class="attr">xAxisData</span>: <span class="built_in">string</span>[], <span class="attr">seriesData</span>: <span class="built_in">number</span>[][]): <span class="function"><span class="params">ECBasicOption</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">tooltip</span>: &#123;</span><br><span class="line">            <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span>,</span><br><span class="line">            <span class="attr">formatter</span>: <span class="keyword">function</span> (<span class="params">param: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> [</span><br><span class="line">                    <span class="string">`Category: <span class="subst">$&#123;param.name&#125;</span>`</span>,</span><br><span class="line">                    <span class="string">`Upper: <span class="subst">$&#123;param.data[<span class="number">5</span>]&#125;</span>`</span>,</span><br><span class="line">                    <span class="string">`Q3: <span class="subst">$&#123;param.data[<span class="number">4</span>]&#125;</span>`</span>,</span><br><span class="line">                    <span class="string">`Median: <span class="subst">$&#123;param.data[<span class="number">3</span>]&#125;</span>`</span>,</span><br><span class="line">                    <span class="string">`Q1: <span class="subst">$&#123;param.data[<span class="number">2</span>]&#125;</span>`</span>,</span><br><span class="line">                    <span class="string">`Lower: <span class="subst">$&#123;param.data[<span class="number">1</span>]&#125;</span>`</span></span><br><span class="line">                ].<span class="title function_">join</span>(<span class="string">&#x27;&lt;br/&gt;&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">grid</span>: &#123;</span><br><span class="line">            <span class="attr">top</span>: <span class="string">&#x27;5%&#x27;</span>,</span><br><span class="line">            <span class="attr">left</span>: <span class="string">&#x27;0%&#x27;</span>,</span><br><span class="line">            <span class="attr">right</span>: <span class="string">&#x27;0%&#x27;</span>,</span><br><span class="line">            <span class="attr">bottom</span>: <span class="string">&#x27;5%&#x27;</span>,</span><br><span class="line">            <span class="attr">containLabel</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">xAxis</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: xAxisData,</span><br><span class="line">            <span class="attr">boundaryGap</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">nameGap</span>: <span class="number">30</span>,</span><br><span class="line">            <span class="attr">splitArea</span>: &#123;</span><br><span class="line">                <span class="attr">show</span>: <span class="literal">false</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">axisLabel</span>: &#123;</span><br><span class="line">                <span class="attr">rotate</span>: <span class="number">0</span>,  <span class="comment">// 根据类别显示调整</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">yAxis</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;碳排放量 (吨)&#x27;</span>,</span><br><span class="line">            <span class="attr">splitArea</span>: &#123;</span><br><span class="line">                <span class="attr">show</span>: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">series</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;碳排放分布&#x27;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;boxplot&#x27;</span>,</span><br><span class="line">                <span class="attr">data</span>: seriesData,</span><br><span class="line">                <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">color</span>: <span class="string">&#x27;#5DB1FF&#x27;</span>  <span class="comment">// 颜色与碳排放主题一致</span></span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> boxplotOptions;</span><br></pre></td></tr></table></figure>

<p>boxplotData.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Boxplot 数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> boxplotData = &#123;</span><br><span class="line">    <span class="attr">xAxisData</span>: [<span class="string">&#x27;能源&#x27;</span>, <span class="string">&#x27;工业&#x27;</span>, <span class="string">&#x27;交通&#x27;</span>, <span class="string">&#x27;居民&#x27;</span>, <span class="string">&#x27;农业&#x27;</span>, <span class="string">&#x27;其他&#x27;</span>],</span><br><span class="line">    <span class="attr">seriesData</span>: [</span><br><span class="line">        [<span class="number">700</span>, <span class="number">1000</span>, <span class="number">2500</span>, <span class="number">3000</span>, <span class="number">4000</span>, <span class="number">6000</span>],  <span class="comment">// Energy</span></span><br><span class="line">        [<span class="number">600</span>, <span class="number">800</span>, <span class="number">2000</span>, <span class="number">2500</span>, <span class="number">3500</span>, <span class="number">4500</span>],   <span class="comment">// Industry</span></span><br><span class="line">        [<span class="number">400</span>, <span class="number">700</span>, <span class="number">1500</span>, <span class="number">2000</span>, <span class="number">2700</span>, <span class="number">3200</span>],   <span class="comment">// Transportation</span></span><br><span class="line">        [<span class="number">200</span>, <span class="number">400</span>, <span class="number">900</span>, <span class="number">1200</span>, <span class="number">1500</span>, <span class="number">2100</span>],    <span class="comment">// Residential</span></span><br><span class="line">        [<span class="number">100</span>, <span class="number">300</span>, <span class="number">600</span>, <span class="number">1000</span>, <span class="number">1200</span>, <span class="number">1800</span>],    <span class="comment">// Agriculture</span></span><br><span class="line">        [<span class="number">50</span>, <span class="number">150</span>, <span class="number">300</span>, <span class="number">500</span>, <span class="number">700</span>, <span class="number">900</span>],        <span class="comment">// Others</span></span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="漏斗图"><a href="#漏斗图" class="headerlink" title="漏斗图"></a>漏斗图</h2><p>funnelContainer.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;funnelContainer w-full&quot;&gt;</span><br><span class="line">        &lt;div ref=&quot;funnelContainer&quot;</span><br><span class="line">            :style=&quot;&#123; width: typeof width === &#x27;string&#x27; ? width : `$&#123;width&#125;px`, height: `$&#123;height&#125;px` &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; onMounted, nextTick, ref &#125; from &#x27;vue&#x27;;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;;</span><br><span class="line">import &#123; ECBasicOption &#125; from &#x27;echarts/types/dist/shared&#x27;;</span><br><span class="line"></span><br><span class="line">// 接收 funnelOptions 函数和数据作为 prop</span><br><span class="line">const props = defineProps&lt;&#123;</span><br><span class="line">    width: number | string;</span><br><span class="line">    height: number;</span><br><span class="line">    data: &#123;</span><br><span class="line">        name: string;</span><br><span class="line">        value: number;</span><br><span class="line">    &#125;[];</span><br><span class="line">    chartOption: (funnelData: &#123; name: string; value: number &#125;[]) =&gt; ECBasicOption;</span><br><span class="line">&#125;&gt;();</span><br><span class="line"></span><br><span class="line">const funnelContainer = ref&lt;HTMLElement | null&gt;(null);</span><br><span class="line">let funnelChart: echarts.ECharts | null = null;</span><br><span class="line"></span><br><span class="line">onMounted(async () =&gt; &#123;</span><br><span class="line">    await nextTick();</span><br><span class="line">    initFunnelChart();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 初始化图表方法</span><br><span class="line">const initFunnelChart = () =&gt; &#123;</span><br><span class="line">    if (funnelContainer.value) &#123;</span><br><span class="line">        funnelChart = echarts.init(funnelContainer.value);</span><br><span class="line">        renderFunnelChart();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 渲染图表</span><br><span class="line">const renderFunnelChart = () =&gt; &#123;</span><br><span class="line">    // 使用从父组件传入的 funnelOptions 函数生成图表选项</span><br><span class="line">    const options = props.chartOption(props.data);</span><br><span class="line"></span><br><span class="line">    // 使用 ECharts 实例的 setOption 方法渲染图表</span><br><span class="line">    funnelChart?.setOption(options);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.funnelContainer &#123;</span><br><span class="line">    // 可根据需要添加样式</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>funnelOptions.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ECBasicOption</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/types/dist/shared&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> funnelOptions = (<span class="attr">funnelData</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span>; <span class="attr">value</span>: <span class="built_in">number</span> &#125;[]): <span class="function"><span class="params">ECBasicOption</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">tooltip</span>: &#123;</span><br><span class="line">            <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span>,</span><br><span class="line">            <span class="attr">formatter</span>: <span class="string">&#x27;&#123;a&#125; &lt;br/&gt;&#123;b&#125; : &#123;c&#125;%&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">legend</span>: &#123;</span><br><span class="line">            <span class="attr">data</span>: funnelData.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">name</span>),</span><br><span class="line">            <span class="attr">bottom</span>: <span class="string">&#x27;10%&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">series</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;绿化来源&#x27;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;funnel&#x27;</span>,</span><br><span class="line">                <span class="attr">left</span>: <span class="string">&#x27;10%&#x27;</span>,</span><br><span class="line">                <span class="attr">top</span>: <span class="number">10</span>,</span><br><span class="line">                <span class="attr">bottom</span>: <span class="number">50</span>,</span><br><span class="line">                <span class="attr">width</span>: <span class="string">&#x27;80%&#x27;</span>,</span><br><span class="line">                <span class="attr">min</span>: <span class="number">0</span>,</span><br><span class="line">                <span class="attr">max</span>: <span class="number">40</span>,</span><br><span class="line">                <span class="attr">minSize</span>: <span class="string">&#x27;0%&#x27;</span>,</span><br><span class="line">                <span class="attr">maxSize</span>: <span class="string">&#x27;100%&#x27;</span>,</span><br><span class="line">                <span class="attr">sort</span>: <span class="string">&#x27;descending&#x27;</span>,</span><br><span class="line">                <span class="attr">gap</span>: <span class="number">2</span>,</span><br><span class="line">                <span class="attr">label</span>: &#123;</span><br><span class="line">                    <span class="attr">show</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">position</span>: <span class="string">&#x27;inside&#x27;</span>,</span><br><span class="line">                    <span class="attr">formatter</span>: <span class="string">&#x27;&#123;b&#125;: &#123;c&#125;%&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">labelLine</span>: &#123;</span><br><span class="line">                    <span class="attr">length</span>: <span class="number">10</span>,</span><br><span class="line">                    <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">                        <span class="attr">width</span>: <span class="number">1</span>,</span><br><span class="line">                        <span class="attr">type</span>: <span class="string">&#x27;solid&#x27;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">borderColor</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">                    <span class="attr">borderWidth</span>: <span class="number">2</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">emphasis</span>: &#123;</span><br><span class="line">                    <span class="attr">label</span>: &#123;</span><br><span class="line">                        <span class="attr">fontSize</span>: <span class="number">20</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">data</span>: funnelData,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> funnelOptions;</span><br></pre></td></tr></table></figure>

<p>funnelData.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> funnelData = [</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;森林&#x27;</span>, <span class="attr">value</span>: <span class="number">40</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;草地&#x27;</span>, <span class="attr">value</span>: <span class="number">30</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;公园&#x27;</span>, <span class="attr">value</span>: <span class="number">20</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">&#x27;其他&#x27;</span>, <span class="attr">value</span>: <span class="number">10</span> &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>



<h2 id="横向柱状图"><a href="#横向柱状图" class="headerlink" title="横向柱状图"></a>横向柱状图</h2><p>horizontalBarContainer.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;horizontalBarContainer w-full&quot;&gt;</span><br><span class="line">        &lt;div ref=&quot;horizontalBarContainer&quot; :style=&quot;&#123; width: typeof width === &#x27;string&#x27; ? width : `$&#123;width&#125;px`, height: `$&#123;height&#125;px` &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; onMounted, nextTick, ref &#125; from &quot;vue&quot;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;;</span><br><span class="line">import &#123; ECBasicOption &#125; from &#x27;echarts/types/dist/shared&#x27;;</span><br><span class="line"></span><br><span class="line">// 接收 airLineOptions 函数和数据作为 prop</span><br><span class="line">const props = defineProps&lt;&#123;</span><br><span class="line">    width: number|string;</span><br><span class="line">    height: number;</span><br><span class="line">    data: &#123;</span><br><span class="line">        yAxisData: string[];</span><br><span class="line">        seriesData: number[];</span><br><span class="line">    &#125;;</span><br><span class="line">    chartOption: (xAxisData: string[], seriesData: number[]) =&gt; ECBasicOption</span><br><span class="line">&#125;&gt;();</span><br><span class="line"></span><br><span class="line">const horizontalBarContainer = ref&lt;HTMLElement | null&gt;(null);</span><br><span class="line">let horizontalBar: echarts.ECharts | null = null;</span><br><span class="line"></span><br><span class="line">onMounted(async () =&gt; &#123;</span><br><span class="line">    await nextTick();</span><br><span class="line">    initAirHorizontalBarChart();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 初始化图表方法</span><br><span class="line">const initAirHorizontalBarChart = () =&gt; &#123;</span><br><span class="line">    if (horizontalBarContainer.value) &#123;</span><br><span class="line">        horizontalBar = echarts.init(horizontalBarContainer.value);</span><br><span class="line">        renderAirHorizontalBar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 渲染图表</span><br><span class="line">const renderAirHorizontalBar = () =&gt; &#123;</span><br><span class="line">    let options = props.chartOption(props.data.yAxisData, props.data.seriesData);</span><br><span class="line"></span><br><span class="line">    // 使用 setOption 方法设置图表配置</span><br><span class="line">    horizontalBar?.setOption(options);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>airHorizontalBarOption.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ECBasicOption</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/types/dist/shared&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> airHorizontalBarOption = (<span class="attr">yAxisData</span>: <span class="built_in">string</span>[], <span class="attr">seriesData</span>: <span class="built_in">number</span>[]):<span class="function"><span class="params">ECBasicOption</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">tooltip</span>: &#123;</span><br><span class="line">            <span class="attr">trigger</span>: <span class="string">&#x27;axis&#x27;</span>,</span><br><span class="line">            <span class="attr">axisPointer</span>: &#123; <span class="attr">type</span>: <span class="string">&#x27;shadow&#x27;</span> &#125;,  <span class="comment">// 提示框显示为阴影效果</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">xAxis</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;AQI&#x27;</span>,</span><br><span class="line">            <span class="attr">nameTextStyle</span>: &#123;</span><br><span class="line">                <span class="attr">padding</span>: [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],  <span class="comment">// 调整 x 轴名称位置</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">position</span>: <span class="string">&#x27;top&#x27;</span>,  <span class="comment">// x 轴放在图表顶部</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">yAxis</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: yAxisData,  <span class="comment">// 使用地区名称作为 y 轴</span></span><br><span class="line">            <span class="attr">axisLabel</span>: &#123;</span><br><span class="line">                <span class="attr">rotate</span>: <span class="number">0</span>,  <span class="comment">// 不旋转标签</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">grid</span>: &#123;</span><br><span class="line">            <span class="attr">left</span>: <span class="string">&#x27;10%&#x27;</span>,</span><br><span class="line">            <span class="attr">right</span>: <span class="string">&#x27;10%&#x27;</span>,</span><br><span class="line">            <span class="attr">bottom</span>: <span class="string">&#x27;10%&#x27;</span>,</span><br><span class="line">            <span class="attr">containLabel</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">series</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;AQI&#x27;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>,</span><br><span class="line">                <span class="attr">data</span>: seriesData,</span><br><span class="line">                <span class="attr">color</span>: [<span class="string">&#x27;#5DB1FF&#x27;</span>],</span><br><span class="line">                <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">barBorderRadius</span>: [<span class="number">0</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">0</span>],  <span class="comment">// 圆角应用到左侧的柱状条</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">emphasis</span>: &#123;</span><br><span class="line">                    <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">                        <span class="attr">color</span>: <span class="string">&#x27;#3398DB&#x27;</span>,  <span class="comment">// 高亮时的颜色</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> airHorizontalBarOption;</span><br></pre></td></tr></table></figure>

<p>horizontalBarData.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> horizontalBarData = &#123;</span><br><span class="line">    <span class="attr">yAxisData</span>: [<span class="string">&#x27;东部地区&#x27;</span>, <span class="string">&#x27;西部地区&#x27;</span>, <span class="string">&#x27;中部地区&#x27;</span>, <span class="string">&#x27;北部地区&#x27;</span>], <span class="comment">// 不同地区</span></span><br><span class="line">    <span class="attr">seriesData</span>: [<span class="number">75</span>, <span class="number">60</span>, <span class="number">85</span>, <span class="number">90</span>], <span class="comment">// 各地区的AQI值</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="折线图"><a href="#折线图" class="headerlink" title="折线图"></a>折线图</h2><p>lineContainer.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;lineContainer w-full&quot;&gt;</span><br><span class="line">        &lt;div ref=&quot;lineContainer&quot; :style=&quot;&#123; width: typeof width === &#x27;string&#x27; ? width : `$&#123;width&#125;px`, height: `$&#123;height&#125;px` &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; onMounted, nextTick, ref &#125; from &quot;vue&quot;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;;</span><br><span class="line">import &#123; ECBasicOption &#125; from &#x27;echarts/types/dist/shared&#x27;;</span><br><span class="line"></span><br><span class="line">// 接收 airLineOptions 函数和数据作为 prop</span><br><span class="line">const props = defineProps&lt;&#123;</span><br><span class="line">    width: number|string;</span><br><span class="line">    height: number;</span><br><span class="line">    data: &#123;</span><br><span class="line">        xAxisData: string[];</span><br><span class="line">        seriesData: number[];</span><br><span class="line">    &#125;;</span><br><span class="line">    chartOption: (xAxisData: string[], seriesData: number[]) =&gt; ECBasicOption</span><br><span class="line">&#125;&gt;();</span><br><span class="line"></span><br><span class="line">const lineContainer = ref&lt;HTMLElement | null&gt;(null);</span><br><span class="line">let line: echarts.ECharts | null = null;</span><br><span class="line"></span><br><span class="line">onMounted(async () =&gt; &#123;</span><br><span class="line">    await nextTick();</span><br><span class="line">    initAirLineChart();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 初始化图表方法</span><br><span class="line">const initAirLineChart = () =&gt; &#123;</span><br><span class="line">    if (lineContainer.value) &#123;</span><br><span class="line">        line = echarts.init(lineContainer.value);</span><br><span class="line">        renderAirLine();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 渲染图表</span><br><span class="line">const renderAirLine = () =&gt; &#123;</span><br><span class="line">    // 使用从父组件传入的 airLineOptions 函数生成图表选项</span><br><span class="line">    const options = props.chartOption(props.data.xAxisData, props.data.seriesData);</span><br><span class="line"></span><br><span class="line">    // 使用 ECharts 实例的 setOption 方法渲染图表</span><br><span class="line">    line?.setOption(options);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>airLineOptions.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ECBasicOption</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/types/dist/shared&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> airLineOptions = (<span class="attr">xAxisData</span>: <span class="built_in">string</span>[], <span class="attr">seriesData</span>: <span class="built_in">number</span>[]): <span class="function"><span class="params">ECBasicOption</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">xAxis</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: xAxisData,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">yAxis</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">            <span class="attr">position</span>: <span class="string">&#x27;left&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;AQI&#x27;</span>,  <span class="comment">// 添加 y 轴标签</span></span><br><span class="line">            <span class="attr">nameTextStyle</span>: &#123;</span><br><span class="line">                <span class="attr">padding</span>: [<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, -<span class="number">30</span>],  <span class="comment">// 调整 AQI 标签位置</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">grid</span>: &#123;</span><br><span class="line">            <span class="attr">left</span>: <span class="string">&#x27;3%&#x27;</span>,</span><br><span class="line">            <span class="attr">right</span>: <span class="string">&#x27;4%&#x27;</span>,</span><br><span class="line">            <span class="attr">bottom</span>: <span class="string">&#x27;3%&#x27;</span>,</span><br><span class="line">            <span class="attr">containLabel</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">series</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;AQI&#x27;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;line&#x27;</span>,</span><br><span class="line">                <span class="attr">symbol</span>: <span class="string">&#x27;circle&#x27;</span>,</span><br><span class="line">                <span class="attr">symbolSize</span>: <span class="number">6</span>,</span><br><span class="line">                <span class="attr">data</span>: seriesData,</span><br><span class="line">                <span class="attr">color</span>: [<span class="string">&#x27;#5DB1FF&#x27;</span>],</span><br><span class="line">                <span class="attr">markLine</span>: &#123;</span><br><span class="line">                    <span class="attr">symbol</span>: [<span class="string">&#x27;none&#x27;</span>, <span class="string">&#x27;none&#x27;</span>],</span><br><span class="line">                    <span class="attr">label</span>: &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">                    <span class="attr">data</span>: [&#123; <span class="attr">xAxis</span>: <span class="number">8</span> &#125;, &#123; <span class="attr">xAxis</span>: <span class="number">11</span> &#125;]</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">areaStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">color</span>: &#123;</span><br><span class="line">                        <span class="attr">type</span>: <span class="string">&#x27;linear&#x27;</span>,</span><br><span class="line">                        <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">                        <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">                        <span class="attr">x2</span>: <span class="number">0</span>,</span><br><span class="line">                        <span class="attr">y2</span>: <span class="number">1</span>,</span><br><span class="line">                        <span class="attr">colorStops</span>: [</span><br><span class="line">                            &#123; <span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">color</span>: <span class="string">&#x27;rgba(93, 177, 255, 0.3)&#x27;</span> &#125;,</span><br><span class="line">                            &#123; <span class="attr">offset</span>: <span class="number">1</span>, <span class="attr">color</span>: <span class="string">&#x27;rgba(93, 177, 255, 0)&#x27;</span> &#125;,</span><br><span class="line">                        ],</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">smooth</span>: <span class="number">0.5</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> airLineOptions;</span><br></pre></td></tr></table></figure>

<p>airLineData.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// airLineData.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> airLineData = &#123;</span><br><span class="line">    <span class="attr">xAxisData</span>: [<span class="string">&#x27;Jan&#x27;</span>, <span class="string">&#x27;Feb&#x27;</span>, <span class="string">&#x27;Mar&#x27;</span>, <span class="string">&#x27;Apr&#x27;</span>, <span class="string">&#x27;May&#x27;</span>, <span class="string">&#x27;Jun&#x27;</span>, <span class="string">&#x27;Jul&#x27;</span>, <span class="string">&#x27;Aug&#x27;</span>, <span class="string">&#x27;Sep&#x27;</span>, <span class="string">&#x27;Oct&#x27;</span>, <span class="string">&#x27;Nov&#x27;</span>, <span class="string">&#x27;Dec&#x27;</span>],</span><br><span class="line">    <span class="attr">seriesData</span>: [<span class="number">45</span>, <span class="number">50</span>, <span class="number">55</span>, <span class="number">60</span>, <span class="number">65</span>, <span class="number">70</span>, <span class="number">75</span>, <span class="number">80</span>, <span class="number">70</span>, <span class="number">65</span>, <span class="number">55</span>, <span class="number">50</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="饼图"><a href="#饼图" class="headerlink" title="饼图"></a>饼图</h2><p>PieContainer.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;pieContainer w-full&quot;&gt;</span><br><span class="line">        &lt;div ref=&quot;pieContainer&quot; :style=&quot;&#123; width: typeof width === &#x27;string&#x27; ? width : `$&#123;width&#125;px`, height: `$&#123;height&#125;px` &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, onMounted, nextTick &#125; from &#x27;vue&#x27;;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;;</span><br><span class="line">import &#123; ECBasicOption &#125; from &#x27;echarts/types/dist/shared&#x27;;</span><br><span class="line"></span><br><span class="line">const props = defineProps&lt;&#123;</span><br><span class="line">    width: number|string;</span><br><span class="line">    height: number;</span><br><span class="line">    data: &#123;</span><br><span class="line">        seriesData: &#123; value: number; name: string &#125;[]</span><br><span class="line">    &#125;;</span><br><span class="line">    chartOption: (seriesData: &#123; value: number; name: string &#125;[]) =&gt; ECBasicOption</span><br><span class="line">&#125;&gt;();</span><br><span class="line"></span><br><span class="line">const pieContainer = ref&lt;HTMLElement | null&gt;(null);</span><br><span class="line">let pie: echarts.ECharts | null = null;</span><br><span class="line"></span><br><span class="line">onMounted(async () =&gt; &#123;</span><br><span class="line">    await nextTick();</span><br><span class="line">    initForestPieChart();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const initForestPieChart = () =&gt; &#123;</span><br><span class="line">    if (pieContainer.value) &#123;</span><br><span class="line">        pie = echarts.init(pieContainer.value);</span><br><span class="line">        renderForestPie();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const renderForestPie = () =&gt; &#123;</span><br><span class="line"></span><br><span class="line">    let options = props.chartOption(props.data.seriesData);</span><br><span class="line"></span><br><span class="line">    // 使用 setOption 方法设置图表配置</span><br><span class="line">    pie?.setOption(options);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>forestPieOption.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ECBasicOption</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/types/dist/shared&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> forestPieOption = (<span class="attr">seriesData</span>: &#123; <span class="attr">value</span>: <span class="built_in">number</span>; <span class="attr">name</span>: <span class="built_in">string</span> &#125;[]):<span class="function"><span class="params">ECBasicOption</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">tooltip</span>: &#123;</span><br><span class="line">            <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span>,</span><br><span class="line">            <span class="attr">formatter</span>: <span class="string">&#x27;&#123;a&#125; &lt;br/&gt;&#123;b&#125;: &#123;c&#125;% (&#123;d&#125;%)&#x27;</span>,  <span class="comment">// 提示框显示名称、数值和百分比</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">legend</span>: &#123;</span><br><span class="line">            <span class="attr">data</span>: seriesData.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">name</span>),  <span class="comment">// 动态生成图例数据</span></span><br><span class="line">            <span class="attr">orient</span>: <span class="string">&#x27;vertical&#x27;</span>,</span><br><span class="line">            <span class="attr">left</span>: <span class="string">&#x27;70%&#x27;</span>,</span><br><span class="line">            <span class="attr">y</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">            <span class="attr">itemGap</span>: <span class="number">30</span>,</span><br><span class="line">            <span class="attr">itemHeight</span>: <span class="number">15</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">series</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;森林覆盖率&#x27;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;pie&#x27;</span>,</span><br><span class="line">                <span class="attr">radius</span>: [<span class="string">&#x27;40%&#x27;</span>, <span class="string">&#x27;70%&#x27;</span>],</span><br><span class="line">                <span class="attr">center</span>: [<span class="string">&#x27;30%&#x27;</span>, <span class="string">&#x27;50%&#x27;</span>],</span><br><span class="line">                <span class="attr">avoidLabelOverlap</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">borderRadius</span>: <span class="number">10</span>,</span><br><span class="line">                    <span class="attr">borderColor</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">                    <span class="attr">borderWidth</span>: <span class="number">2</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">label</span>: &#123;</span><br><span class="line">                    <span class="attr">show</span>: <span class="literal">false</span>,</span><br><span class="line">                    <span class="attr">position</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">emphasis</span>: &#123;</span><br><span class="line">                    <span class="attr">label</span>: &#123;</span><br><span class="line">                        <span class="attr">show</span>: <span class="literal">true</span>,</span><br><span class="line">                        <span class="attr">fontSize</span>: <span class="number">20</span>,</span><br><span class="line">                        <span class="attr">fontWeight</span>: <span class="string">&#x27;bold&#x27;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">labelLine</span>: &#123;</span><br><span class="line">                    <span class="attr">show</span>: <span class="literal">false</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">data</span>: seriesData,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> forestPieOption;</span><br></pre></td></tr></table></figure>

<p>forestPieData.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> forestPieData = &#123;</span><br><span class="line">    <span class="attr">seriesData</span>: [</span><br><span class="line">        &#123; <span class="attr">value</span>: <span class="number">45</span>, <span class="attr">name</span>: <span class="string">&#x27;东部地区&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">value</span>: <span class="number">30</span>, <span class="attr">name</span>: <span class="string">&#x27;西部地区&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">value</span>: <span class="number">15</span>, <span class="attr">name</span>: <span class="string">&#x27;中部地区&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">value</span>: <span class="number">10</span>, <span class="attr">name</span>: <span class="string">&#x27;北部地区&#x27;</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="雷达图"><a href="#雷达图" class="headerlink" title="雷达图"></a>雷达图</h2><p>radarContainer.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;radarContainer w-full&quot;&gt;</span><br><span class="line">        &lt;div ref=&quot;radarContainer&quot;</span><br><span class="line">            :style=&quot;&#123; width: typeof width === &#x27;string&#x27; ? width : `$&#123;width&#125;px`, height: `$&#123;height&#125;px` &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; onMounted, nextTick, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;;</span><br><span class="line">import &#123; ECBasicOption &#125; from &#x27;echarts/types/dist/shared&#x27;;</span><br><span class="line"></span><br><span class="line">// 接收 radarOptions 函数和数据作为 prop</span><br><span class="line">const props = defineProps&lt;&#123;</span><br><span class="line">    width: number | string;</span><br><span class="line">    height: number;</span><br><span class="line">    data: &#123;</span><br><span class="line">        indicatorData: &#123; name: string, max: number &#125;[];</span><br><span class="line">        seriesData: number[];</span><br><span class="line">    &#125;;</span><br><span class="line">    chartOption: (indicatorData: &#123; name: string; max: number &#125;[], seriesData: number[]) =&gt; ECBasicOption;</span><br><span class="line">&#125;&gt;();</span><br><span class="line"></span><br><span class="line">const radarContainer = ref&lt;HTMLElement | null&gt;(null);</span><br><span class="line">let radar: echarts.ECharts | null = null;</span><br><span class="line"></span><br><span class="line">onMounted(async () =&gt; &#123;</span><br><span class="line">    await nextTick();</span><br><span class="line">    initRadarChart();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 初始化雷达图方法</span><br><span class="line">const initRadarChart = () =&gt; &#123;</span><br><span class="line">    if (radarContainer.value) &#123;</span><br><span class="line">        radar = echarts.init(radarContainer.value);</span><br><span class="line">        renderRadarChart();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 渲染雷达图</span><br><span class="line">const renderRadarChart = () =&gt; &#123;</span><br><span class="line">    // 使用从父组件传入的 radarOptions 函数生成图表选项</span><br><span class="line">    const options = props.chartOption(props.data.indicatorData, props.data.seriesData);</span><br><span class="line"></span><br><span class="line">    // 使用 ECharts 实例的 setOption 方法渲染图表</span><br><span class="line">    radar?.setOption(options);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>radarOptions.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ECBasicOption</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/types/dist/shared&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> radarOptions = (<span class="attr">indicatorData</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span>; <span class="attr">max</span>: <span class="built_in">number</span> &#125;[], <span class="attr">seriesData</span>: <span class="built_in">number</span>[]): <span class="function"><span class="params">ECBasicOption</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">tooltip</span>: &#123;</span><br><span class="line">            <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">radar</span>: &#123;</span><br><span class="line">            <span class="comment">// 指标配置</span></span><br><span class="line">            <span class="attr">indicator</span>: indicatorData,</span><br><span class="line">            <span class="attr">shape</span>: <span class="string">&#x27;polygon&#x27;</span>,  <span class="comment">// 雷达图形状</span></span><br><span class="line">            <span class="attr">splitNumber</span>: <span class="number">5</span>,  <span class="comment">// 网格分成的层数</span></span><br><span class="line">            <span class="attr">axisName</span>: &#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;#333&#x27;</span>,  <span class="comment">// 轴线名称颜色</span></span><br><span class="line">                <span class="attr">fontSize</span>: <span class="number">12</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">splitLine</span>: &#123;</span><br><span class="line">                <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">color</span>: <span class="string">&#x27;#ddd&#x27;</span>,  <span class="comment">// 网格线颜色</span></span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">splitArea</span>: &#123;</span><br><span class="line">                <span class="attr">show</span>: <span class="literal">false</span>,  <span class="comment">// 隐藏雷达图的背景填充</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">series</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;绿化率&#x27;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;radar&#x27;</span>,</span><br><span class="line">                <span class="attr">data</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">value</span>: seriesData,</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;年度绿化率&#x27;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                ],</span><br><span class="line">                <span class="attr">areaStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">color</span>: <span class="string">&#x27;rgba(93, 177, 255, 0.5)&#x27;</span>,  <span class="comment">// 填充颜色，透明度调整适合展示绿化率</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">color</span>: <span class="string">&#x27;#5DB1FF&#x27;</span>,  <span class="comment">// 线条颜色</span></span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> radarOptions;</span><br></pre></td></tr></table></figure>

<p>radarData.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> radarData = &#123;</span><br><span class="line">    <span class="attr">indicatorData</span>: [</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;公园绿地&#x27;</span>, <span class="attr">max</span>: <span class="number">100</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;道路绿化&#x27;</span>, <span class="attr">max</span>: <span class="number">100</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;社区绿化&#x27;</span>, <span class="attr">max</span>: <span class="number">100</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;城市绿化&#x27;</span>, <span class="attr">max</span>: <span class="number">100</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">&#x27;水域绿化&#x27;</span>, <span class="attr">max</span>: <span class="number">100</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">seriesData</span>: [<span class="number">80</span>, <span class="number">70</span>, <span class="number">85</span>, <span class="number">90</span>, <span class="number">75</span>],  <span class="comment">// 各个绿化维度的实际值</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="散点图"><a href="#散点图" class="headerlink" title="散点图"></a>散点图</h2><p>scatterContainer.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;scatterContainer w-full&quot;&gt;</span><br><span class="line">        &lt;div ref=&quot;scatterContainer&quot;</span><br><span class="line">            :style=&quot;&#123; width: typeof width === &#x27;string&#x27; ? width : `$&#123;width&#125;px`, height: `$&#123;height&#125;px` &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; onMounted, nextTick, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;;</span><br><span class="line">import &#123; ECBasicOption &#125; from &#x27;echarts/types/dist/shared&#x27;;</span><br><span class="line"></span><br><span class="line">// 接收 scatterOption 函数和数据作为 prop</span><br><span class="line">const props = defineProps&lt;&#123;</span><br><span class="line">    width: number | string;</span><br><span class="line">    height: number;</span><br><span class="line">    data: &#123;</span><br><span class="line">        xAxisData: string[];</span><br><span class="line">        seriesData: number[][];</span><br><span class="line">    &#125;;</span><br><span class="line">    chartOption: (xAxisData: string[], seriesData: number[][]) =&gt; ECBasicOption</span><br><span class="line">&#125;&gt;();</span><br><span class="line"></span><br><span class="line">const scatterContainer = ref&lt;HTMLElement | null&gt;(null);</span><br><span class="line">let scatter: echarts.ECharts | null = null;</span><br><span class="line"></span><br><span class="line">onMounted(async () =&gt; &#123;</span><br><span class="line">    await nextTick();</span><br><span class="line">    initScatterChart();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 初始化图表方法</span><br><span class="line">const initScatterChart = () =&gt; &#123;</span><br><span class="line">    if (scatterContainer.value) &#123;</span><br><span class="line">        scatter = echarts.init(scatterContainer.value);</span><br><span class="line">        renderScatterChart();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 渲染图表</span><br><span class="line">const renderScatterChart = () =&gt; &#123;</span><br><span class="line">    // 使用从父组件传入的 scatterOption 函数生成图表选项</span><br><span class="line">    const options = props.chartOption(props.data.xAxisData, props.data.seriesData);</span><br><span class="line"></span><br><span class="line">    // 使用 ECharts 实例的 setOption 方法渲染图表</span><br><span class="line">    scatter?.setOption(options);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>scatterOption.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ECBasicOption</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;echarts/types/dist/shared&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> scatterOption = (<span class="attr">xAxisData</span>: <span class="built_in">string</span>[], <span class="attr">seriesData</span>: <span class="built_in">number</span>[][]): <span class="function"><span class="params">ECBasicOption</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">xAxis</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;category&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: xAxisData,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;类别&#x27;</span>,  <span class="comment">// X轴名称，可以根据具体数据修改</span></span><br><span class="line">            <span class="attr">axisLabel</span>: &#123;</span><br><span class="line">                <span class="attr">rotate</span>: <span class="number">45</span>,  <span class="comment">// 适当旋转以适应类别显示</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">yAxis</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;value&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;碳排放量 (吨)&#x27;</span>,  <span class="comment">// Y轴名称，适合用于展示碳排放数据</span></span><br><span class="line">            <span class="attr">nameTextStyle</span>: &#123;</span><br><span class="line">                <span class="attr">padding</span>: [<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>],</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">grid</span>: &#123;</span><br><span class="line">            <span class="attr">left</span>: <span class="string">&#x27;5%&#x27;</span>,</span><br><span class="line">            <span class="attr">right</span>: <span class="string">&#x27;5%&#x27;</span>,</span><br><span class="line">            <span class="attr">bottom</span>: <span class="string">&#x27;10%&#x27;</span>,</span><br><span class="line">            <span class="attr">containLabel</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">series</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;碳排放量对比&#x27;</span>,</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;scatter&#x27;</span>,</span><br><span class="line">                <span class="attr">data</span>: seriesData,</span><br><span class="line">                <span class="attr">symbolSize</span>: <span class="keyword">function</span> (<span class="params">data:<span class="built_in">any</span></span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(data[<span class="number">1</span>]) / <span class="number">5</span>;  <span class="comment">// 根据数据动态调整点的大小</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;#5DB1FF&#x27;</span>,  <span class="comment">// 颜色设为适合碳排放主题的蓝色</span></span><br><span class="line">                <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">                    <span class="attr">emphasis</span>: &#123;</span><br><span class="line">                        <span class="attr">borderColor</span>: <span class="string">&#x27;#333&#x27;</span>,</span><br><span class="line">                        <span class="attr">borderWidth</span>: <span class="number">1</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">tooltip</span>: &#123;</span><br><span class="line">            <span class="attr">trigger</span>: <span class="string">&#x27;item&#x27;</span>,</span><br><span class="line">            <span class="attr">formatter</span>: <span class="keyword">function</span> (<span class="params">params:<span class="built_in">any</span></span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;params.name&#125;</span>&lt;br/&gt;碳排放量: <span class="subst">$&#123;params.value[<span class="number">1</span>]&#125;</span> 吨`</span>;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> scatterOption;</span><br></pre></td></tr></table></figure>

<p>scatterData.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> scatterData = &#123;</span><br><span class="line">    <span class="attr">xAxisData</span>: [<span class="string">&#x27;能源&#x27;</span>, <span class="string">&#x27;工业&#x27;</span>, <span class="string">&#x27;交通&#x27;</span>, <span class="string">&#x27;居民&#x27;</span>, <span class="string">&#x27;农业&#x27;</span>, <span class="string">&#x27;其他&#x27;</span>],</span><br><span class="line">    <span class="attr">seriesData</span>: [</span><br><span class="line">        [<span class="string">&#x27;能源&#x27;</span>, <span class="number">5300</span>],</span><br><span class="line">        [<span class="string">&#x27;工业&#x27;</span>, <span class="number">4500</span>],</span><br><span class="line">        [<span class="string">&#x27;交通&#x27;</span>, <span class="number">3200</span>],</span><br><span class="line">        [<span class="string">&#x27;居民&#x27;</span>, <span class="number">2100</span>],</span><br><span class="line">        [<span class="string">&#x27;农业&#x27;</span>, <span class="number">1800</span>],</span><br><span class="line">        [<span class="string">&#x27;其他&#x27;</span>, <span class="number">900</span>]</span><br><span class="line">    ],  <span class="comment">// 每个类别对应的碳排放量数据</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h1 id="electron-vue3打包项目"><a href="#electron-vue3打包项目" class="headerlink" title="electron + vue3打包项目"></a>electron + vue3打包项目</h1><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><ol>
<li><strong>下载</strong></li>
</ol>
<p>由于直接<code>npm</code>会导致卡死，所以采用<code>cnpm</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npmmirror.com</span><br><span class="line">cnpm install --save-dev electron electron-builder</span><br></pre></td></tr></table></figure>



<ol start="2">
<li><strong>创建 Electron 主进程文件</strong></li>
</ol>
<p>src&#x2F;electron&#x2F;main.js</p>
<p>这里踩了一个大坑就是之前执着用ts，导致后面在“main”的指定中，因为只能指定js类型文件，所以会导致以后每一次main文件修改，都会需要进行编译后，才能运行出修改的代码，但是实际上也不能这么写，后面会在main文件指定底下详细说明</p>
<p>还有一个问题就是<code>require</code>、<code>__dirname</code>这些都是commandjs的用法，也就是常规node，如果在es模块下使用时需要添加<code>nodeIntegration:true</code>、<code>contextIsolation:false</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 控制应用生命周期和创建原生浏览器窗口的模组</span></span><br><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span>, <span class="title class_">Menu</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="comment">// process.env[&#x27;ELECTRON_DISABLE_SECURITY_WARNINGS&#x27;] = true // 关闭控制台的警告</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 创建浏览器窗口</span></span><br><span class="line">    <span class="keyword">const</span> mainWindow = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">        <span class="attr">width</span>: <span class="number">1200</span>,</span><br><span class="line">        <span class="attr">height</span>: <span class="number">800</span>,</span><br><span class="line">        <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">            <span class="comment">// 书写渲染进程中的配置</span></span><br><span class="line">            <span class="attr">nodeIntegration</span>: <span class="literal">true</span>, <span class="comment">//开启true这一步很重要,目的是为了vue文件中可以引入node和electron相关的API</span></span><br><span class="line">            <span class="attr">contextIsolation</span>: <span class="literal">false</span>, <span class="comment">// 可以使用require方法</span></span><br><span class="line">            <span class="attr">enableRemoteModule</span>: <span class="literal">true</span>, <span class="comment">// 可以使用remote方法</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 监听html</span></span><br><span class="line">    mainWindow.<span class="title function_">loadFile</span>(path.<span class="title function_">join</span>(app.<span class="title function_">getAppPath</span>(), <span class="string">&#x27;dist/index.html&#x27;</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 这段程序将会在 Electron 结束初始化</span></span><br><span class="line"><span class="comment">// 和创建浏览器窗口的时候调用</span></span><br><span class="line"><span class="comment">// 部分 API 在 ready 事件触发后才能使用。</span></span><br><span class="line">app.<span class="title function_">whenReady</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">createWindow</span>()</span><br><span class="line"></span><br><span class="line">    app.<span class="title function_">on</span>(<span class="string">&#x27;activate&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 通常在 macOS 上，当点击 dock 中的应用程序图标时，如果没有其他</span></span><br><span class="line">        <span class="comment">// 打开的窗口，那么程序会重新创建一个窗口。</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">BrowserWindow</span>.<span class="title function_">getAllWindows</span>().<span class="property">length</span> === <span class="number">0</span>) <span class="title function_">createWindow</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 除了 macOS 外，当所有窗口都被关闭的时候退出程序。 因此，通常对程序和它们在</span></span><br><span class="line"><span class="comment">// 任务栏上的图标来说，应当保持活跃状态，直到用户使用 Cmd + Q 退出。</span></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;window-all-closed&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.<span class="property">platform</span> !== <span class="string">&#x27;darwin&#x27;</span>) app.<span class="title function_">quit</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>配置 Vite 进行 Electron 打包</strong></li>
</ol>
<p>vite.config.ts</p>
<p>rollupOptions：</p>
<p>external：</p>
<p>globals：</p>
<p>electron：</p>
<p>build中的outDir指定的是什么文件输出路径</p>
<p>emptyOutDir：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">  </span><br><span class="line">  <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">emptyOutDir</span>: <span class="literal">false</span>,     <span class="comment">// 避免清空 dist 目录</span></span><br><span class="line">    <span class="attr">rollupOptions</span>: &#123;</span><br><span class="line">      <span class="attr">external</span>: [<span class="string">&#x27;electron&#x27;</span>],</span><br><span class="line">      <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">globals</span>: &#123;</span><br><span class="line">          <span class="attr">electron</span>: <span class="string">&#x27;electron&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><strong>配置ts编译方式</strong></li>
</ol>
<p>tsconfig.node.json</p>
<p>注意tsconfig.node.json主要是需要commandjs的</p>
<p><code>include</code>内的位置也需要注意，因为是直接处于<code>outDir</code>下面的</p>
<p>所以之前<code>include</code>里面为<code>&quot;src/electron&quot;</code>,<code>outDir</code>为<code>./dist/electron</code>时，编译出来的位置在<code>./dist/electron/src/electron</code></p>
<p>解决方式有两种，一种是更改<code>rootDir</code>，但是会报错，因为<code>vite.config.ts</code>不位于这个文件夹下面</p>
<p>第二种方法就是下面的方法将electron文件夹，移出src，并将<code>ouDir</code>设置为<code>&quot;./dist&quot;</code></p>
<p>同时下面还有支持导出js的配置，只需要把<code>include</code>中的内容改为<code>.js</code>后缀就行</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ES2022&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;ES2023&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CommonJS&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">&quot;allowJs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;checkJs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noEmitHelpers&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;removeComments&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;isolatedModules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;moduleDetection&quot;</span><span class="punctuation">:</span> <span class="string">&quot;force&quot;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Emit JavaScript files */</span></span><br><span class="line">    <span class="attr">&quot;noEmit&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span>              <span class="comment">// 改为 false 以允许编译输出</span></span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./dist&quot;</span><span class="punctuation">,</span>   <span class="comment">// 输出目录为 dist/electron</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span>       <span class="comment">// 允许与 CommonJS 互操作</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Linting */</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noUnusedLocals&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noUnusedParameters&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noFallthroughCasesInSwitch&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;vite.config.ts&quot;</span><span class="punctuation">,</span>              <span class="comment">// 保持对 Vite 配置的支持</span></span><br><span class="line">    <span class="string">&quot;electron/**/*&quot;</span>            <span class="comment">// 包括主进程文件 (例如 electron/main.ts)</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;node_modules&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>



<ol start="5">
<li><strong>更新</strong> package.json <strong>的脚本</strong></li>
</ol>
<p>在 package.json 中添加 Electron 的启动脚本以及指定app入口路径：</p>
<p>vue-tsc -b用作build时的ts检查，<code>vue-tsc -b</code>会检查并编译，<code>vue-tsc –noEmit</code>只检查不编译，当然直接去掉这个命令可以直接编译出来，但是不推荐这么做，去损失了ts检查代码的功能</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dist/electron/main.js&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-tsc -b &amp;&amp; vite build&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;serve&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite preview&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;electron:dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;electron .&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;electron:build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue-tsc -b &amp;&amp; vite build &amp;&amp; electron-builder&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<ol start="6">
<li><strong>更新 Electron Builder 配置</strong></li>
</ol>
<p>在 package.json 中添加 Electron Builder 的打包配置：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;appId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;com.example.app&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mac&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dmg&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;category&quot;</span><span class="punctuation">:</span> <span class="string">&quot;public.app-category.productivity&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;dist/**/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;electron/**/*&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;extraResources&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;from&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/assets/&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;to&quot;</span><span class="punctuation">:</span> <span class="string">&quot;resources&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;filter&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;**/*&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;directories&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;buildResources&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ol start="7">
<li><strong>输入运行命令以及构建命令</strong></li>
</ol>
<p><strong>打包前注意</strong>router必须是hash模式</p>
<p>参考：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/qq_40994260/article/details/107440478/">https://blog.csdn.net/qq_40994260/article/details/107440478/</a></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">  routes</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>打包后mac相关文件都位于<code>Resources</code>下的<code>app.asar</code>，需要借助<code>Electron</code>官方的工具才能打开，不过会存在很多<code>.lproj</code>后缀的文件夹，里面均为空，其实里面是针对各个语言的配置包，但是这个项目没有配置，所以为空</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudp npm run electron:dev</span><br><span class="line">sudp npm run electron:build</span><br></pre></td></tr></table></figure>

<h2 id="热更新实现"><a href="#热更新实现" class="headerlink" title="热更新实现"></a>热更新实现</h2><h2 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h2><ol>
<li>tsconfig.app.json以及tsconfig.node.json的区分问题</li>
</ol>
<p>​	参考：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/2301_79568124/article/details/137783628">https://blog.csdn.net/2301_79568124/article/details/137783628</a></p>
<ol start="2">
<li>main.ts代码在编译后莫名在最后一行多了个export {};导致报错</li>
</ol>
<p>​	在 tsconfig.node.json 中调整 compilerOptions，确保正确处理 CommonJS 模块</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;module&quot;</span>: <span class="string">&quot;CommonJS&quot;</span>,</span><br><span class="line">    <span class="string">&quot;target&quot;</span>: <span class="string">&quot;ESNext&quot;</span>,</span><br><span class="line">    <span class="string">&quot;outDir&quot;</span>: <span class="string">&quot;./dist&quot;</span>,</span><br><span class="line">    <span class="string">&quot;esModuleInterop&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;allowJs&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;checkJs&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&quot;noEmitHelpers&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;removeComments&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;include&quot;</span>: [<span class="string">&quot;vite.config.ts&quot;</span>, <span class="string">&quot;electron/**/*&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>启动electron:build命令，但是没有编译出main.js文件，原因是tsconfig.node.json中include没有增加对应electron文件夹</li>
<li>编译出main.js文件夹位置错位的问题，主要是outDir以及rootDir</li>
<li>报错<code>⨯ Application entry file &quot;index.js&quot; in the &quot;/Users/tec/Desktop/ai-report-assistant-frontend/dist/mac-arm64/ai-report-assistant-frontend.app/Contents/Resources/app.asar&quot; does not exist. </code></li>
</ol>
<p>​	这个原因在于main.js文件缺失，解决过程如下，首先是直接报错给gpt，发现”main”没加，然后发现根本就没编译electron文件夹下面的内容</p>
<ol start="6">
<li><p>报错<strong>require not defined in ES Module scope</strong>以及**__dirname is not defined**</p>
<p>原因都在于Electron 主进程代码使用了 ES module 格式，但 require 只在 CommonJS 中可用，需要删除<code>package.json</code>中的<code>&quot;type&quot;: &quot;module&quot;,</code>，并在<code>main.ts</code>中进行相关配置，详情见步骤2，同时在<code>tsconfig.node.json</code>中也需要修改编译的相关配置，详情见bug2，和步骤4</p>
</li>
</ol>
<h1 id="整体思路"><a href="#整体思路" class="headerlink" title="整体思路"></a>整体思路</h1><ol>
<li><strong>识别问题类型模型</strong>：<ol>
<li><strong>目标</strong>：分类用户的输入为问数、归因或预测。</li>
<li><strong>方法</strong>：使用自然语言处理技术（如BERT或其他预训练模型），并结合有标注的数据集进行监督学习。训练时，输入为用户提问，输出为问题类型标签。</li>
<li><strong>评估</strong>：使用准确率、召回率和F1分数来评估模型性能，确保模型能有效区分不同类型的问题。</li>
</ol>
</li>
<li><strong>提取关键数据模型</strong>：<ol>
<li><strong>目标</strong>：从用户输入中提取出关键的数值、单位和时间等信息。</li>
<li><strong>方法</strong>：应用命名实体识别（NER）技术，训练模型识别特定实体（如年份、数量等）。可以使用标注数据来进行微调。</li>
<li><strong>评估</strong>：通过查全率和查准率来评估模型在提取关键数据方面的表现，确保其准确性。</li>
</ol>
</li>
<li><strong>分析原因模型</strong>：<ol>
<li><strong>目标</strong>：分析用户询问的背后原因，并生成相关因素及其贡献。</li>
<li><strong>方法</strong>：利用关联规则学习或因果推断模型，结合历史数据，识别影响温室气体排放的主要因素和子因素。训练时，可以使用结构化数据和文本数据进行联合学习。</li>
<li><strong>评估</strong>：通过对比分析结果与真实数据的吻合度，验证模型的有效性和解释性。</li>
</ol>
</li>
<li><strong>预测未来趋势模型</strong>：<ol>
<li><strong>目标</strong>：预测未来的温室气体排放量及其变化趋势。</li>
<li><strong>方法</strong>：应用时间序列分析（如ARIMA、LSTM等），使用历史数据进行训练。可以引入外部因素（如政策变化、经济指标等）以提升预测准确性。</li>
<li><strong>评估</strong>：通过均方根误差（RMSE）和平均绝对误差（MAE）来评估模型的预测性能，确保其在实际应用中的可靠性。</li>
</ol>
</li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://tecnb.github.io">TEC</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://tecnb.github.io/posts/36279e9a.html">https://tecnb.github.io/posts/36279e9a.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://tecnb.github.io" target="_blank">TEC</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/TECNB/picgodemo@main/img/%E5%AF%B9%E8%AF%9D%E5%BC%8F%E6%99%BA%E8%83%BD%E5%8A%A9%E6%89%8B%E9%A1%B9%E7%9B%AE%E7%BB%8F%E9%AA%8C-cover.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/8132f177.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/TECNB/picgodemo@main/img/%E6%96%B0%E9%97%BB%E4%BC%AA%E9%80%A0%E6%A3%80%E6%B5%8B%E5%B9%B3%E5%8F%B0%E9%A1%B9%E7%9B%AE%E7%BB%8F%E9%AA%8C-cover.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">新闻伪造检测平台项目经验</div></div></a></div><div class="next-post pull-right"><a href="/posts/4e261382.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/TECNB/picgodemo@main/img/StarGazer%E9%A1%B9%E7%9B%AE%E7%BB%8F%E9%AA%8C.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">StarGazer项目经验</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC81NzY3OC8zNDE0MQ=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#package-json-%E6%9C%AC%E5%9C%B0%E5%8C%85%E5%AF%BC%E5%85%A5tgz"><span class="toc-number">1.</span> <span class="toc-text">package.json 本地包导入tgz</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git%E5%86%B2%E7%AA%81"><span class="toc-number">2.</span> <span class="toc-text">git冲突</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%BE%E6%A0%87%E5%BA%93"><span class="toc-number">3.</span> <span class="toc-text">图标库</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#clip-path"><span class="toc-number">4.</span> <span class="toc-text">clip-path</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.</span> <span class="toc-text">低代码实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%96%E6%8B%BD%E4%BB%A5%E5%8F%8A%E4%BC%B8%E7%BC%A9"><span class="toc-number">5.1.</span> <span class="toc-text">拖拽以及伸缩</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BB%9A%E5%8A%A8%E8%B7%9F%E6%89%8B%E9%80%BB%E8%BE%91"><span class="toc-number">5.1.1.</span> <span class="toc-text">滚动跟手逻辑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96-el-scroll-%E6%BB%9A%E5%8A%A8%E8%B7%9D%E7%A6%BB"><span class="toc-number">5.1.2.</span> <span class="toc-text">获取 el-scroll 滚动距离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#onMouseDown%EF%BC%88%E6%8C%89%E4%B8%8B%E9%BC%A0%E6%A0%87%E5%A4%84%E7%90%86%E9%80%BB%E8%BE%91%EF%BC%89"><span class="toc-number">5.1.3.</span> <span class="toc-text">onMouseDown（按下鼠标处理逻辑）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#onMouseMove%EF%BC%88%E9%BC%A0%E6%A0%87%E7%A7%BB%E5%8A%A8%E5%A4%84%E7%90%86%E9%80%BB%E8%BE%91%EF%BC%89"><span class="toc-number">5.1.4.</span> <span class="toc-text">onMouseMove（鼠标移动处理逻辑）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#onMouseUp%EF%BC%88%E9%87%8A%E6%94%BE%E9%BC%A0%E6%A0%87%E5%A4%84%E7%90%86%E9%80%BB%E8%BE%91%EF%BC%89"><span class="toc-number">5.1.5.</span> <span class="toc-text">onMouseUp（释放鼠标处理逻辑）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E9%80%82%E5%BA%94%E5%B8%83%E5%B1%80"><span class="toc-number">5.2.</span> <span class="toc-text">自适应布局</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E9%81%AE%E6%8C%A1%E9%80%BB%E8%BE%91"><span class="toc-number">5.2.1.</span> <span class="toc-text">检查遮挡逻辑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E4%B8%A4%E4%B8%AA%E5%85%83%E7%B4%A0%E6%98%AF%E5%90%A6%E9%81%AE%E6%8C%A1"><span class="toc-number">5.2.2.</span> <span class="toc-text">检查两个元素是否遮挡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%92%E4%BD%8D%E9%80%BB%E8%BE%91"><span class="toc-number">5.2.3.</span> <span class="toc-text">归位逻辑</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#elementplus%E4%B8%BB%E9%A2%98%E8%B0%83%E8%8A%82"><span class="toc-number">5.3.</span> <span class="toc-text">elementplus主题调节</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#position-fixed%E7%9B%B8%E5%AF%B9%E7%88%B6%E7%BA%A7%E5%85%83%E7%B4%A0%E5%AE%9A%E4%BD%8D"><span class="toc-number">6.</span> <span class="toc-text">position:fixed相对父级元素定位</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#after%E3%80%81-before"><span class="toc-number">7.</span> <span class="toc-text">:after、:before</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%AD%E5%A4%B4%E5%BD%A2%E7%8A%B6%E7%BB%84%E4%BB%B6"><span class="toc-number">8.</span> <span class="toc-text">箭头形状组件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#WEB%E8%87%AA%E5%B8%A6TTS%E5%AE%9E%E7%8E%B0%E8%AF%AD%E9%9F%B3%E6%96%87%E5%AD%97%E4%BA%92%E8%BD%AC"><span class="toc-number">9.</span> <span class="toc-text">WEB自带TTS实现语音文字互转</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#echart%E5%B0%81%E8%A3%85"><span class="toc-number">10.</span> <span class="toc-text">echart封装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">10.1.</span> <span class="toc-text">引用方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%B1%E7%8A%B6%E5%9B%BE"><span class="toc-number">10.2.</span> <span class="toc-text">柱状图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%AA%E8%A1%A8%E7%9B%98"><span class="toc-number">10.3.</span> <span class="toc-text">仪表盘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%92%E9%A1%BB%E5%9B%BE"><span class="toc-number">10.4.</span> <span class="toc-text">盒须图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BC%8F%E6%96%97%E5%9B%BE"><span class="toc-number">10.5.</span> <span class="toc-text">漏斗图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%AA%E5%90%91%E6%9F%B1%E7%8A%B6%E5%9B%BE"><span class="toc-number">10.6.</span> <span class="toc-text">横向柱状图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%98%E7%BA%BF%E5%9B%BE"><span class="toc-number">10.7.</span> <span class="toc-text">折线图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A5%BC%E5%9B%BE"><span class="toc-number">10.8.</span> <span class="toc-text">饼图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%B7%E8%BE%BE%E5%9B%BE"><span class="toc-number">10.9.</span> <span class="toc-text">雷达图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%A3%E7%82%B9%E5%9B%BE"><span class="toc-number">10.10.</span> <span class="toc-text">散点图</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#electron-vue3%E6%89%93%E5%8C%85%E9%A1%B9%E7%9B%AE"><span class="toc-number">11.</span> <span class="toc-text">electron + vue3打包项目</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4"><span class="toc-number">11.1.</span> <span class="toc-text">步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E6%9B%B4%E6%96%B0%E5%AE%9E%E7%8E%B0"><span class="toc-number">11.2.</span> <span class="toc-text">热更新实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%A5%E9%94%99"><span class="toc-number">11.3.</span> <span class="toc-text">报错</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B4%E4%BD%93%E6%80%9D%E8%B7%AF"><span class="toc-number">12.</span> <span class="toc-text">整体思路</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By TEC</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Livere' === 'Livere' || !false) {
  if (false) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script></div><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><div class="aplayer no-destroy" data-id="7766753897" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true"> </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>